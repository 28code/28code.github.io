{"meta":{"title":"28code","subtitle":null,"description":null,"author":"28code","url":"http://28code.com","root":"/"},"pages":[{"title":"","date":"2019-03-08T04:23:42.224Z","updated":"2019-03-08T04:23:42.224Z","comments":true,"path":"404.html","permalink":"http://28code.com/404.html","excerpt":"","text":"What do you want to find? 你想找什么？"},{"title":"archives","date":"2018-09-30T02:14:22.000Z","updated":"2019-03-08T09:16:08.419Z","comments":true,"path":"archives/index.html","permalink":"http://28code.com/archives/index.html","excerpt":"","text":""},{"title":"categories","date":"2018-09-30T02:14:22.000Z","updated":"2019-03-07T07:54:24.855Z","comments":true,"path":"categories/index.html","permalink":"http://28code.com/categories/index.html","excerpt":"","text":""},{"title":"tags","date":"2018-09-30T02:12:19.000Z","updated":"2019-03-07T07:54:24.958Z","comments":true,"path":"tags/index.html","permalink":"http://28code.com/tags/index.html","excerpt":"","text":""},{"title":"","date":"2019-03-08T08:12:21.648Z","updated":"2019-03-08T08:12:21.648Z","comments":true,"path":"css/main.css","permalink":"http://28code.com/css/main.css","excerpt":"","text":"/* normalize.css v3.0.2 | MIT License | git.io/normalize */ html { font-family: sans-serif; /* 1 */ -ms-text-size-adjust: 100%; /* 2 */ -webkit-text-size-adjust: 100%; /* 2 */ } body { margin: 0; } article, aside, details, figcaption, figure, footer, header, hgroup, main, menu, nav, section, summary { display: block; } audio, canvas, progress, video { display: inline-block; /* 1 */ vertical-align: baseline; /* 2 */ } audio:not([controls]) { display: none; height: 0; } [hidden], template { display: none; } a { background-color: transparent; } a:active, a:hover { outline: 0; } abbr[title] { border-bottom: 1px dotted; } b, strong { font-weight: bold; } dfn { font-style: italic; } h1 { font-size: 2em; margin: 0.67em 0; } mark { background: #ff0; color: #000; } small { font-size: 80%; } sub, sup { font-size: 75%; line-height: 0; position: relative; vertical-align: baseline; } sup { top: -0.5em; } sub { bottom: -0.25em; } img { border: 0; } svg:not(:root) { overflow: hidden; } figure { margin: 1em 40px; } hr { -moz-box-sizing: content-box; box-sizing: content-box; height: 0; } pre { overflow: auto; } code, kbd, pre, samp { font-family: monospace, monospace; font-size: 1em; } button, input, optgroup, select, textarea { color: inherit; /* 1 */ font: inherit; /* 2 */ margin: 0; /* 3 */ } button { overflow: visible; } button, select { text-transform: none; } button, html input[type=\"button\"], input[type=\"reset\"], input[type=\"submit\"] { -webkit-appearance: button; /* 2 */ cursor: pointer; /* 3 */ } button[disabled], html input[disabled] { cursor: default; } button::-moz-focus-inner, input::-moz-focus-inner { border: 0; padding: 0; } input { line-height: normal; } input[type=\"checkbox\"], input[type=\"radio\"] { box-sizing: border-box; /* 1 */ padding: 0; /* 2 */ } input[type=\"number\"]::-webkit-inner-spin-button, input[type=\"number\"]::-webkit-outer-spin-button { height: auto; } input[type=\"search\"] { -webkit-appearance: textfield; /* 1 */ -moz-box-sizing: content-box; -webkit-box-sizing: content-box; /* 2 */ box-sizing: content-box; } input[type=\"search\"]::-webkit-search-cancel-button, input[type=\"search\"]::-webkit-search-decoration { -webkit-appearance: none; } fieldset { border: 1px solid #c0c0c0; margin: 0 2px; padding: 0.35em 0.625em 0.75em; } legend { border: 0; /* 1 */ padding: 0; /* 2 */ } textarea { overflow: auto; } optgroup { font-weight: bold; } table { border-collapse: collapse; border-spacing: 0; } td, th { padding: 0; } ::selection { background: #262a30; color: #fff; } body { position: relative; font-family: 'Lato', \"PingFang SC\", \"Microsoft YaHei\", sans-serif; font-size: 14px; line-height: 2; color: #555; background: #fff; } @media (max-width: 767px) { body { padding-right: 0 !important; } } @media (min-width: 768px) and (max-width: 991px) { body { padding-right: 0 !important; } } @media (min-width: 1200px) { body { font-size: 16px; } } h1, h2, h3, h4, h5, h6 { margin: 0; padding: 0; font-weight: bold; line-height: 1.5; font-family: 'Lato', \"PingFang SC\", \"Microsoft YaHei\", sans-serif; } h1, h2, h3, h4, h5, h6 { margin: 20px 0 15px; } h1 { font-size: 24px; } @media (max-width: 767px) { h1 { font-size: 20px; } } h2 { font-size: 22px; } @media (max-width: 767px) { h2 { font-size: 18px; } } h3 { font-size: 20px; } @media (max-width: 767px) { h3 { font-size: 16px; } } h4 { font-size: 18px; } @media (max-width: 767px) { h4 { font-size: 14px; } } h5 { font-size: 16px; } @media (max-width: 767px) { h5 { font-size: 12px; } } h6 { font-size: 14px; } @media (max-width: 767px) { h6 { font-size: 10px; } } p { margin: 0 0 20px 0; } a { color: #555; text-decoration: none; outline: none; border-bottom: 1px solid #999; word-wrap: break-word; } a:hover { color: #222; border-bottom-color: #222; } blockquote { margin: 0; padding: 0; } img { display: block; margin: auto; max-width: 100%; height: auto; } hr { margin: 40px 0; height: 3px; border: none; background-color: #ddd; background-image: repeating-linear-gradient(-45deg, #fff, #fff 4px, transparent 4px, transparent 8px); } blockquote { padding: 0 15px; color: #666; border-left: 4px solid #ddd; } blockquote cite::before { content: \"-\"; padding: 0 5px; } dt { font-weight: 700; } dd { margin: 0; padding: 0; } kbd { border: 1px solid #ccc; border-radius: 0.2em; box-shadow: 0.1em 0.1em 0.2em rgba(0,0,0,0.1); background-color: #f9f9f9; font-family: inherit; background-image: -webkit-linear-gradient(top, #eee, #fff, #eee); padding: 0.1em 0.3em; white-space: nowrap; } .text-left { text-align: left; } .text-center { text-align: center; } .text-right { text-align: right; } .text-justify { text-align: justify; } .text-nowrap { white-space: nowrap; } .text-lowercase { text-transform: lowercase; } .text-uppercase { text-transform: uppercase; } .text-capitalize { text-transform: capitalize; } .center-block { display: block; margin-left: auto; margin-right: auto; } .clearfix:before, .clearfix:after { content: \" \"; display: table; } .clearfix:after { clear: both; } .pullquote { width: 45%; } .pullquote.left { float: left; margin-left: 5px; margin-right: 10px; } .pullquote.right { float: right; margin-left: 10px; margin-right: 5px; } .affix.affix.affix { position: fixed; } .translation { margin-top: -20px; font-size: 14px; color: #999; } .scrollbar-measure { width: 100px; height: 100px; overflow: scroll; position: absolute; top: -9999px; } .use-motion .motion-element { opacity: 0; } table { margin: 20px 0; width: 100%; border-collapse: collapse; border-spacing: 0; border: 1px solid #ddd; font-size: 14px; word-wrap: break-all; } table>tbody>tr:nth-of-type(odd) { background-color: #f9f9f9; } table>tbody>tr:hover { background-color: #f5f5f5; } caption, th, td { padding: 8px; text-align: left; vertical-align: middle; font-weight: normal; } th, td { border-bottom: 3px solid #ddd; border-right: 1px solid #eee; } th { padding-bottom: 10px; font-weight: 700; } td { border-bottom-width: 1px; } html, body { height: 100%; } .container { position: relative; min-height: 100%; } .header-inner { margin: 0 auto; padding: 100px 0 70px; width: 700px; } @media (min-width: 1200px) { .container .header-inner { width: 800px; } } @media (min-width: 1600px) { .container .header-inner { width: 900px; } } .main { padding-bottom: 150px; } .main-inner { margin: 0 auto; width: 700px; } @media (min-width: 1200px) { .container .main-inner { width: 800px; } } @media (min-width: 1600px) { .container .main-inner { width: 900px; } } .footer { position: absolute; left: 0; bottom: 0; width: 100%; min-height: 50px; } .footer-inner { box-sizing: border-box; margin: 20px auto; width: 700px; } @media (min-width: 1200px) { .container .footer-inner { width: 800px; } } @media (min-width: 1600px) { .container .footer-inner { width: 900px; } } pre, .highlight { overflow: auto; margin: 20px 0; padding: 0; font-size: 14px; color: #c5c8c6; background: #1d1f21; line-height: 1.6; } pre, code { font-family: consolas, Menlo, \"PingFang SC\", \"Microsoft YaHei\", monospace; } code { padding: 2px 4px; word-wrap: break-word; color: #555; background: #eee; border-radius: 3px; font-size: 14px; } pre { padding: 10px; } pre code { padding: 0; color: #c5c8c6; background: none; text-shadow: none; } .highlight { border-radius: 1px; } .highlight pre { border: none; margin: 0; padding: 10px 0; } .highlight table { margin: 0; width: auto; border: none; } .highlight td { border: none; padding: 0; } .highlight figcaption { font-size: 1em; color: #c5c8c6; line-height: 1em; margin-bottom: 1em; margin: 0em; padding: 0.5em; background: #eee; border-bottom: 1px solid #e9e9e9; } .highlight figcaption:before, .highlight figcaption:after { content: \" \"; display: table; } .highlight figcaption:after { clear: both; } .highlight figcaption a { float: right; color: #c5c8c6; } .highlight figcaption a:hover { border-bottom-color: #c5c8c6; } .highlight .gutter pre { padding-left: 10px; padding-right: 10px; color: #888f96; text-align: right; background-color: #000; } .highlight .code pre { width: 100%; padding-left: 10px; padding-right: 10px; background-color: #1d1f21; } .highlight .line { height: 20px; } .gutter { -webkit-user-select: none; -moz-user-select: none; -ms-user-select: none; user-select: none; } .gist table { width: auto; } .gist table td { border: none; } pre .deletion { background: #008000; } pre .addition { background: #800000; } pre .meta { color: #b294bb; } pre .comment { color: #969896; } pre .variable, pre .attribute, pre .tag, pre .regexp, pre .ruby .constant, pre .xml .tag .title, pre .xml .pi, pre .xml .doctype, pre .html .doctype, pre .css .id, pre .css .class, pre .css .pseudo { color: #c66; } pre .number, pre .preprocessor, pre .built_in, pre .literal, pre .params, pre .constant, pre .command { color: #de935f; } pre .ruby .class .title, pre .css .rules .attribute, pre .string, pre .value, pre .inheritance, pre .header, pre .ruby .symbol, pre .xml .cdata, pre .special, pre .number, pre .formula { color: #b5bd68; } pre .title, pre .css .hexcolor { color: #8abeb7; } pre .function, pre .python .decorator, pre .python .title, pre .ruby .function .title, pre .ruby .title .keyword, pre .perl .sub, pre .javascript .title, pre .coffeescript .title { color: #81a2be; } pre .keyword, pre .javascript .function { color: #b294bb; } .posts-expand .post-body img.full-image { border: none; } .blockquote-center, .page-home .post-type-quote blockquote, .page-post-detail .post-type-quote blockquote { position: relative; margin: 40px 0; padding: 0; border-left: none; text-align: center; } .blockquote-center::before, .page-home .post-type-quote blockquote::before, .page-post-detail .post-type-quote blockquote::before, .blockquote-center::after, .page-home .post-type-quote blockquote::after, .page-post-detail .post-type-quote blockquote::after { position: absolute; content: ' '; display: block; width: 100%; height: 24px; opacity: 0.2; background-repeat: no-repeat; background-position: 0 -6px; background-size: 22px 22px; } .blockquote-center::before, .page-home .post-type-quote blockquote::before, .page-post-detail .post-type-quote blockquote::before { top: -20px; background-image: url(\"../images/quote-l.svg\"); border-top: 1px solid #ccc; } .blockquote-center::after, .page-home .post-type-quote blockquote::after, .page-post-detail .post-type-quote blockquote::after { bottom: -20px; background-image: url(\"../images/quote-r.svg\"); border-bottom: 1px solid #ccc; background-position: 100% 8px; } .blockquote-center p, .page-home .post-type-quote blockquote p, .page-post-detail .post-type-quote blockquote p, .blockquote-center div, .page-home .post-type-quote blockquote div, .page-post-detail .post-type-quote blockquote div { text-align: center; } .post .post-body .group-picture img { box-sizing: border-box; padding: 0 3px; border: none; } .post .group-picture-row { overflow: hidden; margin-top: 6px; } .post .group-picture-row:first-child { margin-top: 0; } .post .group-picture-column { float: left; } .page-post-detail .post-body .group-picture-column { float: none; margin-top: 10px; width: auto !important; } .page-post-detail .post-body .group-picture-column img { margin: 0 auto; } .page-archive .group-picture-container { overflow: hidden; } .page-archive .group-picture-row { float: left; } .page-archive .group-picture-row:first-child { margin-top: 6px; } .page-archive .group-picture-column { max-width: 150px; max-height: 150px; } .post-body .note { position: relative; padding: 15px; margin-bottom: 20px; border: 1px solid #eee; border-left-width: 5px; border-radius: 3px; } .post-body .note h2, .post-body .note h3, .post-body .note h4, .post-body .note h5, .post-body .note h6 { margin-top: 0; margin-bottom: 0; border-bottom: initial; padding-top: 0 !important; } .post-body .note p:first-child, .post-body .note ul:first-child, .post-body .note ol:first-child, .post-body .note table:first-child, .post-body .note pre:first-child, .post-body .note blockquote:first-child { margin-top: 0; } .post-body .note p:last-child, .post-body .note ul:last-child, .post-body .note ol:last-child, .post-body .note table:last-child, .post-body .note pre:last-child, .post-body .note blockquote:last-child { margin-bottom: 0; } .post-body .note.default { border-left-color: #777; } .post-body .note.default h2, .post-body .note.default h3, .post-body .note.default h4, .post-body .note.default h5, .post-body .note.default h6 { color: #777; } .post-body .note.primary { border-left-color: #6f42c1; } .post-body .note.primary h2, .post-body .note.primary h3, .post-body .note.primary h4, .post-body .note.primary h5, .post-body .note.primary h6 { color: #6f42c1; } .post-body .note.info { border-left-color: #428bca; } .post-body .note.info h2, .post-body .note.info h3, .post-body .note.info h4, .post-body .note.info h5, .post-body .note.info h6 { color: #428bca; } .post-body .note.success { border-left-color: #5cb85c; } .post-body .note.success h2, .post-body .note.success h3, .post-body .note.success h4, .post-body .note.success h5, .post-body .note.success h6 { color: #5cb85c; } .post-body .note.warning { border-left-color: #f0ad4e; } .post-body .note.warning h2, .post-body .note.warning h3, .post-body .note.warning h4, .post-body .note.warning h5, .post-body .note.warning h6 { color: #f0ad4e; } .post-body .note.danger { border-left-color: #d9534f; } .post-body .note.danger h2, .post-body .note.danger h3, .post-body .note.danger h4, .post-body .note.danger h5, .post-body .note.danger h6 { color: #d9534f; } .post-body .label { display: inline; padding: 0 2px; white-space: nowrap; } .post-body .label.default { background-color: #f0f0f0; } .post-body .label.primary { background-color: #efe6f7; } .post-body .label.info { background-color: #e5f2f8; } .post-body .label.success { background-color: #e7f4e9; } .post-body .label.warning { background-color: #fcf6e1; } .post-body .label.danger { background-color: #fae8eb; } .post-body .tabs { position: relative; display: block; margin-bottom: 20px; padding-top: 10px; } .post-body .tabs ul.nav-tabs { margin: 0; padding: 0; display: flex; margin-bottom: -1px; } @media (max-width: 413px) { .post-body .tabs ul.nav-tabs { display: block; margin-bottom: 5px; } } .post-body .tabs ul.nav-tabs li.tab { list-style-type: none !important; margin: 0 0.25em 0 0; border-top: 3px solid transparent; border-left: 1px solid transparent; border-right: 1px solid transparent; } @media (max-width: 413px) { .post-body .tabs ul.nav-tabs li.tab { margin: initial; border-top: 1px solid transparent; border-left: 3px solid transparent; border-right: 1px solid transparent; border-bottom: 1px solid transparent; } } .post-body .tabs ul.nav-tabs li.tab a { outline: 0; border-bottom: initial; display: block; line-height: 1.8em; padding: 0.25em 0.75em; transition-duration: 0.2s; transition-timing-function: ease-out; transition-delay: 0s; } .post-body .tabs ul.nav-tabs li.tab a i { width: 1.285714285714286em; } .post-body .tabs ul.nav-tabs li.tab.active { border-top: 3px solid #fc6423; border-left: 1px solid #ddd; border-right: 1px solid #ddd; background-color: #fff; } @media (max-width: 413px) { .post-body .tabs ul.nav-tabs li.tab.active { border-top: 1px solid #ddd; border-left: 3px solid #fc6423; border-right: 1px solid #ddd; border-bottom: 1px solid #ddd; } } .post-body .tabs ul.nav-tabs li.tab.active a { cursor: default; color: #555; } .post-body .tabs .tab-content { background-color: #fff; } .post-body .tabs .tab-content .tab-pane { border: 1px solid #ddd; padding: 20px 20px 0 20px; } .post-body .tabs .tab-content .tab-pane:not(.active) { display: none !important; } .post-body .tabs .tab-content .tab-pane.active { display: block !important; } .btn { display: inline-block; padding: 0 20px; font-size: 14px; color: #555; background: transparent; border: 2px solid #222; text-decoration: none; border-radius: 0; transition-property: background-color; transition-duration: 0.2s; transition-timing-function: ease-in-out; transition-delay: 0s; line-height: 2; } .btn:hover { border-color: #222; color: #222; background: #fff; } .btn +.btn { margin: 0 0 8px 8px; } .btn .fa-fw { width: 1.285714285714286em; text-align: left; } .btn-bar { display: block; width: 22px; height: 2px; background: #555; border-radius: 1px; } .btn-bar+.btn-bar { margin-top: 4px; } .pagination { margin: 120px 0 40px; text-align: center; border-top: 1px solid #eee; } .page-number-basic, .pagination .prev, .pagination .next, .pagination .page-number, .pagination .space { display: inline-block; position: relative; top: -1px; margin: 0 10px; padding: 0 11px; } @media (max-width: 767px) { .page-number-basic, .pagination .prev, .pagination .next, .pagination .page-number, .pagination .space { margin: 0 5px; } } .pagination .prev, .pagination .next, .pagination .page-number { border-bottom: 0; border-top: 1px solid #eee; transition-property: border-color; transition-duration: 0.2s; transition-timing-function: ease-in-out; transition-delay: 0s; } .pagination .prev:hover, .pagination .next:hover, .pagination .page-number:hover { border-top-color: #222; } .pagination .space { padding: 0; margin: 0; } .pagination .prev { margin-left: 0; } .pagination .next { margin-right: 0; } .pagination .page-number.current { color: #fff; background: #ccc; border-top-color: #ccc; } @media (max-width: 767px) { .pagination { border-top: none; } .pagination .prev, .pagination .next, .pagination .page-number { margin-bottom: 10px; border-top: 0; border-bottom: 1px solid #eee; padding: 0 10px; } .pagination .prev:hover, .pagination .next:hover, .pagination .page-number:hover { border-bottom-color: #222; } } .comments { margin: 60px 20px 0; } .tag-cloud { text-align: center; } .tag-cloud a { display: inline-block; margin: 10px; } .back-to-top { box-sizing: border-box; position: fixed; bottom: -100px; right: 30px; z-index: 1050; padding: 0 6px; width: 24px; background: #222; font-size: 12px; opacity: 1; color: #fff; cursor: pointer; text-align: center; -webkit-transform: translateZ(0); transition-property: bottom; transition-duration: 0.2s; transition-timing-function: ease-in-out; transition-delay: 0s; } @media (min-width: 768px) and (max-width: 991px) { .back-to-top { display: none !important; } } @media (max-width: 767px) { .back-to-top { display: none !important; } } .back-to-top.back-to-top-on { bottom: 19px; } .header { background: transparent; } .header-inner { position: relative; } .headband { height: 3px; background: #222; } .site-meta { margin: 0; text-align: left; } @media (max-width: 767px) { .site-meta { text-align: center; } } .brand { position: relative; display: inline-block; padding: 0 40px; color: #222; background: #222; border-bottom: none; } .brand:hover { color: #222; } .logo { display: inline-block; margin-right: 5px; line-height: 36px; vertical-align: top; } .site-title { display: inline-block; vertical-align: top; line-height: 36px; font-size: 20px; font-weight: normal; font-family: 'Lato', \"PingFang SC\", \"Microsoft YaHei\", sans-serif; } .site-subtitle { margin-top: 10px; font-size: 13px; color: #999; } .use-motion .brand { opacity: 0; } .use-motion .logo, .use-motion .site-title, .use-motion .site-subtitle { opacity: 0; position: relative; top: -10px; } .site-nav-toggle { display: none; position: absolute; top: 10px; left: 10px; } @media (max-width: 767px) { .site-nav-toggle { display: block; } } .site-nav-toggle button { margin-top: 2px; padding: 9px 10px; background: transparent; border: none; } @media (max-width: 767px) { .site-nav { display: none; margin: 0 -10px; padding: 0 10px; clear: both; border-top: 1px solid #ddd; } } @media (min-width: 768px) and (max-width: 991px) { .site-nav { display: block !important; } } @media (min-width: 992px) { .site-nav { display: block !important; } } .menu { margin-top: 20px; padding-left: 0; text-align: center; } .menu .menu-item { display: inline-block; margin: 0 10px; list-style: none; } @media screen and (max-width: 767px) { .menu .menu-item { margin-top: 10px; } } .menu .menu-item a { display: block; font-size: 13px; line-height: inherit; border-bottom: 1px solid transparent; transition-property: border-color; transition-duration: 0.2s; transition-timing-function: ease-in-out; transition-delay: 0s; } .menu .menu-item a:hover, .menu-item-active a { border-bottom-color: #222; } .menu .menu-item .fa { margin-right: 5px; } .use-motion .menu-item { opacity: 0; } .github-corner :hover .octo-arm { animation: octocat-wave 560ms ease-in-out; } @media (max-width: 991px) { .github-corner .github-corner:hover .octo-arm { animation: none; } .github-corner .github-corner .octo-arm { animation: octocat-wave 560ms ease-in-out; } } @media (max-width: 767px) { .github-corner >svg { top: inherit !important; margin-top: -50px; } } @-moz-keyframes octocat-wave { 0%, 100% { -webkit-transform: rotate(0); -moz-transform: rotate(0); -ms-transform: rotate(0); -o-transform: rotate(0); transform: rotate(0); } 20%, 60% { -webkit-transform: rotate(-25deg); -moz-transform: rotate(-25deg); -ms-transform: rotate(-25deg); -o-transform: rotate(-25deg); transform: rotate(-25deg); } 40%, 80% { -webkit-transform: rotate(10deg); -moz-transform: rotate(10deg); -ms-transform: rotate(10deg); -o-transform: rotate(10deg); transform: rotate(10deg); } } @-webkit-keyframes octocat-wave { 0%, 100% { -webkit-transform: rotate(0); -moz-transform: rotate(0); -ms-transform: rotate(0); -o-transform: rotate(0); transform: rotate(0); } 20%, 60% { -webkit-transform: rotate(-25deg); -moz-transform: rotate(-25deg); -ms-transform: rotate(-25deg); -o-transform: rotate(-25deg); transform: rotate(-25deg); } 40%, 80% { -webkit-transform: rotate(10deg); -moz-transform: rotate(10deg); -ms-transform: rotate(10deg); -o-transform: rotate(10deg); transform: rotate(10deg); } } @-o-keyframes octocat-wave { 0%, 100% { -webkit-transform: rotate(0); -moz-transform: rotate(0); -ms-transform: rotate(0); -o-transform: rotate(0); transform: rotate(0); } 20%, 60% { -webkit-transform: rotate(-25deg); -moz-transform: rotate(-25deg); -ms-transform: rotate(-25deg); -o-transform: rotate(-25deg); transform: rotate(-25deg); } 40%, 80% { -webkit-transform: rotate(10deg); -moz-transform: rotate(10deg); -ms-transform: rotate(10deg); -o-transform: rotate(10deg); transform: rotate(10deg); } } @keyframes octocat-wave { 0%, 100% { -webkit-transform: rotate(0); -moz-transform: rotate(0); -ms-transform: rotate(0); -o-transform: rotate(0); transform: rotate(0); } 20%, 60% { -webkit-transform: rotate(-25deg); -moz-transform: rotate(-25deg); -ms-transform: rotate(-25deg); -o-transform: rotate(-25deg); transform: rotate(-25deg); } 40%, 80% { -webkit-transform: rotate(10deg); -moz-transform: rotate(10deg); -ms-transform: rotate(10deg); -o-transform: rotate(10deg); transform: rotate(10deg); } } .post-body { font-family: 'Lato', \"PingFang SC\", \"Microsoft YaHei\", sans-serif; } @media (max-width: 767px) { .post-body { word-break: break-word; } } .post-body .fancybox img { display: block !important; margin: 0 auto; cursor: pointer; cursor: zoom-in; cursor: -webkit-zoom-in; } .post-body .image-caption, .post-body .figure .caption { margin: -20px auto 15px; text-align: center; font-size: 14px; color: #999; font-weight: bold; line-height: 1; } .post-sticky-flag { display: inline-block; font-size: 16px; -ms-transform: rotate(30deg); -webkit-transform: rotate(30deg); -moz-transform: rotate(30deg); -ms-transform: rotate(30deg); -o-transform: rotate(30deg); transform: rotate(30deg); } .use-motion .post-block, .use-motion .pagination, .use-motion .comments { opacity: 0; } .use-motion .post-header { opacity: 0; } .use-motion .post-body { opacity: 0; } .use-motion .collection-title { opacity: 0; } .posts-expand { padding-top: 40px; } @media (max-width: 767px) { .posts-expand { margin: 0 20px; } .post-body pre .gutter pre { padding-right: 10px; } .post-body .highlight { margin-left: 0px; margin-right: 0px; padding: 0; } .post-body .highlight .gutter pre { padding-right: 10px; } } @media (min-width: 992px) { .posts-expand .post-body { text-align: justify; } } .posts-expand .post-body h2, .posts-expand .post-body h3, .posts-expand .post-body h4, .posts-expand .post-body h5, .posts-expand .post-body h6 { padding-top: 10px; } .posts-expand .post-body h2 .header-anchor, .posts-expand .post-body h3 .header-anchor, .posts-expand .post-body h4 .header-anchor, .posts-expand .post-body h5 .header-anchor, .posts-expand .post-body h6 .header-anchor { float: right; margin-left: 10px; color: #ccc; border-bottom-style: none; visibility: hidden; } .posts-expand .post-body h2 .header-anchor:hover, .posts-expand .post-body h3 .header-anchor:hover, .posts-expand .post-body h4 .header-anchor:hover, .posts-expand .post-body h5 .header-anchor:hover, .posts-expand .post-body h6 .header-anchor:hover { color: inherit; } .posts-expand .post-body h2:hover .header-anchor, .posts-expand .post-body h3:hover .header-anchor, .posts-expand .post-body h4:hover .header-anchor, .posts-expand .post-body h5:hover .header-anchor, .posts-expand .post-body h6:hover .header-anchor { visibility: visible; } .posts-expand .post-body ul li { list-style: circle; } .posts-expand .post-body img { box-sizing: border-box; margin: auto; padding: 3px; border: 1px solid #ddd; } .posts-expand .post-body .fancybox img { margin: 0 auto 25px; } .posts-expand .post-body img { margin: 0 auto 25px; } @media (max-width: 767px) { .posts-collapse { margin: 0 20px; } .posts-collapse .post-title, .posts-collapse .post-meta { display: block; width: auto; text-align: left; } } .posts-collapse { position: relative; z-index: 1010; margin-left: 0; } .posts-collapse::after { content: \" \"; position: absolute; top: 20px; left: 0; margin-left: -2px; width: 4px; height: 100%; background: #f5f5f5; z-index: -1; } @media (max-width: 767px) { .posts-collapse { margin: 0 20px; } } .posts-collapse .collection-title { position: relative; margin: 60px 0; } .posts-collapse .collection-title h1, .posts-collapse .collection-title h2 { margin-left: 20px; } .posts-collapse .collection-title small { color: #bbb; margin-left: 5px; } .posts-collapse .collection-title::before { content: \" \"; position: absolute; left: 0; top: 50%; margin-left: -4px; margin-top: -4px; width: 8px; height: 8px; background: #bbb; border-radius: 50%; } .posts-collapse .post { margin: 30px 0; } .posts-collapse .post-header { position: relative; transition-duration: 0.2s; transition-timing-function: ease-in-out; transition-delay: 0s; transition-property: border; border-bottom: 1px dashed #ccc; } .posts-collapse .post-header::before { content: \" \"; position: absolute; left: 0; top: 12px; width: 6px; height: 6px; margin-left: -4px; background: #bbb; border-radius: 50%; border: 1px solid #fff; transition-duration: 0.2s; transition-timing-function: ease-in-out; transition-delay: 0s; transition-property: background; } .posts-collapse .post-header:hover { border-bottom-color: #666; } .posts-collapse .post-header:hover::before { background: #222; } .posts-collapse .post-meta { position: absolute; font-size: 12px; left: 20px; top: 5px; } .posts-collapse .post-comments-count { display: none; } .posts-collapse .post-title { margin-left: 60px; font-size: 16px; font-weight: normal; line-height: inherit; } .posts-collapse .post-title::after { margin-left: 3px; opacity: 0.6; } .posts-collapse .post-title a { color: #666; border-bottom: none; } .page-home .post-type-quote .post-header, .page-post-detail .post-type-quote .post-header, .page-home .post-type-quote .post-tags, .page-post-detail .post-type-quote .post-tags { display: none; } .posts-expand .post-title { text-align: center; word-break: break-word; font-weight: 400; } .posts-expand .post-title-link { display: inline-block; position: relative; color: #555; border-bottom: none; line-height: 1.2; vertical-align: top; } .posts-expand .post-title-link::before { content: \"\"; position: absolute; width: 100%; height: 2px; bottom: 0; left: 0; background-color: #000; visibility: hidden; -webkit-transform: scaleX(0); -moz-transform: scaleX(0); -ms-transform: scaleX(0); -o-transform: scaleX(0); transform: scaleX(0); transition-duration: 0.2s; transition-timing-function: ease-in-out; transition-delay: 0s; } .posts-expand .post-title-link:hover::before { visibility: visible; -webkit-transform: scaleX(1); -moz-transform: scaleX(1); -ms-transform: scaleX(1); -o-transform: scaleX(1); transform: scaleX(1); } .posts-expand .post-title-link .fa { font-size: 16px; } .posts-expand .post-meta { margin: 3px 0 60px 0; color: #999; font-family: 'Lato', \"PingFang SC\", \"Microsoft YaHei\", sans-serif; font-size: 12px; text-align: center; } .posts-expand .post-meta .post-category-list { display: inline-block; margin: 0; padding: 3px; } .posts-expand .post-meta .post-category-list-link { color: #999; } .posts-expand .post-meta .post-description { font-size: 14px; margin-top: 2px; } .posts-expand .post-meta time { border-bottom: 1px dashed #999; cursor: help; } .post-meta-divider { margin: 0 0.5em; } .post-meta-item-icon { margin-right: 3px; } @media (min-width: 768px) and (max-width: 991px) { .post-meta-item-icon { display: inline-block; } } @media (max-width: 767px) { .post-meta-item-icon { display: inline-block; } } @media (min-width: 768px) and (max-width: 991px) { .post-meta-item-text { display: none; } } @media (max-width: 767px) { .post-meta-item-text { display: none; } } .post-button { margin-top: 40px; } .posts-expand .post-tags { margin-top: 40px; text-align: center; } .posts-expand .post-tags a { display: inline-block; margin-right: 10px; font-size: 13px; } .post-nav { display: table; margin-top: 15px; width: 100%; border-top: 1px solid #eee; } .post-nav-divider { display: table-cell; width: 10%; } .post-nav-item { display: table-cell; padding: 10px 0 0 0; width: 45%; vertical-align: top; } .post-nav-item a { position: relative; display: block; line-height: 25px; font-size: 14px; color: #555; border-bottom: none; } .post-nav-item a:hover { color: #222; border-bottom: none; } .post-nav-item a:active { top: 2px; } .post-nav-item .fa { position: absolute; top: 8px; left: 0; font-size: 12px; } .post-nav-next a { padding-left: 15px; } .post-nav-prev { text-align: right; } .post-nav-prev a { padding-right: 15px; } .post-nav-prev .fa { right: 0; left: auto; } .posts-expand .post-eof { display: block; margin: 80px auto 60px; width: 8%; height: 1px; background: #ccc; text-align: center; } .post:last-child .post-eof.post-eof.post-eof { display: none; } .post-gallery { display: table; table-layout: fixed; width: 100%; border-collapse: separate; } .post-gallery-row { display: table-row; } .post-gallery .post-gallery-img { display: table-cell; text-align: center; vertical-align: middle; border: none; } .post-gallery .post-gallery-img img { max-width: 100%; max-height: 100%; border: none; } .fancybox-close, .fancybox-close:hover { border: none; } .rtl.post-body p, .rtl.post-body a, .rtl.post-body h1, .rtl.post-body h2, .rtl.post-body h3, .rtl.post-body h4, .rtl.post-body h5, .rtl.post-body h6, .rtl.post-body li, .rtl.post-body ul, .rtl.post-body ol { direction: rtl; font-family: UKIJ Ekran; } .rtl.post-title { font-family: UKIJ Ekran; } .sidebar { position: fixed; right: 0; top: 0; bottom: 0; width: 0; z-index: 1040; box-shadow: inset 0 2px 6px #000; background: #222; -webkit-transform: translateZ(0); } .sidebar a, .sidebar .exturl { color: #999; border-bottom-color: #555; } .sidebar a:hover, .sidebar .exturl:hover { color: #eee; } @media (min-width: 768px) and (max-width: 991px) { .sidebar { display: none !important; } } @media (max-width: 767px) { .sidebar { display: none !important; } } .sidebar-inner { position: relative; padding: 20px 10px; color: #999; text-align: center; } .site-overview-wrap { overflow: hidden; } .site-overview { overflow-y: auto; overflow-x: hidden; } .sidebar-toggle { position: fixed; right: 30px; bottom: 45px; width: 14px; height: 14px; padding: 5px; background: #222; line-height: 0; z-index: 1050; cursor: pointer; -webkit-transform: translateZ(0); } @media (min-width: 768px) and (max-width: 991px) { .sidebar-toggle { display: none !important; } } @media (max-width: 767px) { .sidebar-toggle { display: none !important; } } .sidebar-toggle-line { position: relative; display: inline-block; vertical-align: top; height: 2px; width: 100%; background: #fff; margin-top: 3px; } .sidebar-toggle-line:first-child { margin-top: 0; } .site-author-image { display: block; margin: 0 auto; padding: 2px; max-width: 96px; height: auto; border: 2px solid #333; opacity: 1; } .site-author-name { margin: 5px 0 0; text-align: center; color: #f5f5f5; font-weight: normal; } .site-description { margin-top: 5px; text-align: center; font-size: 14px; color: #999; } .site-state { overflow: hidden; line-height: 1.4; white-space: nowrap; text-align: center; } .site-state-item { display: inline-block; padding: 0 15px; border-left: 1px solid #333; } .site-state-item:first-child { border-left: none; } .site-state-item a { border-bottom: none; } .site-state-item-count { display: block; text-align: center; color: inherit; font-weight: 600; font-size: 18px; } .site-state-item-name { font-size: 13px; color: inherit; } .feed-link { margin-top: 20px; } .feed-link a { display: inline-block; padding: 0 15px; color: #fc6423; border: 1px solid #fc6423; border-radius: 4px; } .feed-link a i { color: #fc6423; font-size: 14px; } .feed-link a:hover { color: #fff; background: #fc6423; } .feed-link a:hover i { color: #fff; } .links-of-author { margin-top: 20px; } .links-of-author a, .links-of-author .exturl { display: inline-block; vertical-align: middle; margin-right: 10px; margin-bottom: 10px; border-bottom-color: #555; font-size: 13px; } .links-of-author a:before, .links-of-author .exturl:before { display: inline-block; vertical-align: middle; margin-right: 3px; content: \" \"; width: 4px; height: 4px; border-radius: 50%; background: #ffcbda; } .links-of-blogroll { font-size: 13px; } .links-of-blogroll-title { margin-top: 20px; font-size: 14px; font-weight: 600; } .links-of-blogroll-list { margin: 0; padding: 0; list-style: none; } .links-of-blogroll-item { padding: 2px 10px; } .links-of-blogroll-item a { max-width: 280px; box-sizing: border-box; display: inline-block; overflow: hidden; white-space: nowrap; text-overflow: ellipsis; } .sidebar-nav { margin: 0 0 20px; padding-left: 0; } .sidebar-nav li { display: inline-block; cursor: pointer; border-bottom: 1px solid transparent; font-size: 14px; color: #555; } .sidebar-nav li:hover { color: #f5f5f5; } .page-post-detail .sidebar-nav-toc { padding: 0 5px; } .page-post-detail .sidebar-nav-overview { margin-left: 10px; } .sidebar-nav .sidebar-nav-active { color: #87daff; border-bottom-color: #87daff; } .sidebar-nav .sidebar-nav-active:hover { color: #87daff; } .sidebar-panel { display: none; } .sidebar-panel-active { display: block; } .post-toc-empty { font-size: 14px; color: #666; } .post-toc-wrap { overflow: hidden; } .post-toc { overflow: auto; } .post-toc ol { margin: 0; padding: 0 2px 5px 10px; text-align: left; list-style: none; font-size: 14px; } .post-toc ol > ol { padding-left: 0; } .post-toc ol a { transition-duration: 0.2s; transition-timing-function: ease-in-out; transition-delay: 0s; transition-property: all; color: #999; border-bottom-color: #555; } .post-toc ol a:hover { color: #ccc; border-bottom-color: #ccc; } .post-toc .nav-item { overflow: hidden; text-overflow: ellipsis; line-height: 1.8; } .post-toc .nav .nav-child { display: none; } .post-toc .nav .active > .nav-child { display: block; } .post-toc .nav .active-current > .nav-child { display: block; } .post-toc .nav .active-current > .nav-child > .nav-item { display: block; } .post-toc .nav .active > a { color: #87daff; border-bottom-color: #87daff; } .post-toc .nav .active-current > a { color: #87daff; } .post-toc .nav .active-current > a:hover { color: #87daff; } .footer { font-size: 14px; color: #999; } .footer img { border: none; } .footer-inner { text-align: center; } .with-love { display: inline-block; margin: 0 5px; color: #808080; } .powered-by, .theme-info { display: inline-block; } .cc-license { margin-top: 10px; text-align: center; } .cc-license .cc-opacity { opacity: 0.7; border-bottom: none; } .cc-license .cc-opacity:hover { opacity: 0.9; } .cc-license img { display: inline-block; } @-moz-keyframes iconAnimate { 0%, 100% { -webkit-transform: scale(1); -moz-transform: scale(1); -ms-transform: scale(1); -o-transform: scale(1); transform: scale(1); } 10%, 30% { -webkit-transform: scale(0.9); -moz-transform: scale(0.9); -ms-transform: scale(0.9); -o-transform: scale(0.9); transform: scale(0.9); } 20%, 40%, 60%, 80% { -webkit-transform: scale(1.1); -moz-transform: scale(1.1); -ms-transform: scale(1.1); -o-transform: scale(1.1); transform: scale(1.1); } 50%, 70% { -webkit-transform: scale(1.1); -moz-transform: scale(1.1); -ms-transform: scale(1.1); -o-transform: scale(1.1); transform: scale(1.1); } } @-webkit-keyframes iconAnimate { 0%, 100% { -webkit-transform: scale(1); -moz-transform: scale(1); -ms-transform: scale(1); -o-transform: scale(1); transform: scale(1); } 10%, 30% { -webkit-transform: scale(0.9); -moz-transform: scale(0.9); -ms-transform: scale(0.9); -o-transform: scale(0.9); transform: scale(0.9); } 20%, 40%, 60%, 80% { -webkit-transform: scale(1.1); -moz-transform: scale(1.1); -ms-transform: scale(1.1); -o-transform: scale(1.1); transform: scale(1.1); } 50%, 70% { -webkit-transform: scale(1.1); -moz-transform: scale(1.1); -ms-transform: scale(1.1); -o-transform: scale(1.1); transform: scale(1.1); } } @-o-keyframes iconAnimate { 0%, 100% { -webkit-transform: scale(1); -moz-transform: scale(1); -ms-transform: scale(1); -o-transform: scale(1); transform: scale(1); } 10%, 30% { -webkit-transform: scale(0.9); -moz-transform: scale(0.9); -ms-transform: scale(0.9); -o-transform: scale(0.9); transform: scale(0.9); } 20%, 40%, 60%, 80% { -webkit-transform: scale(1.1); -moz-transform: scale(1.1); -ms-transform: scale(1.1); -o-transform: scale(1.1); transform: scale(1.1); } 50%, 70% { -webkit-transform: scale(1.1); -moz-transform: scale(1.1); -ms-transform: scale(1.1); -o-transform: scale(1.1); transform: scale(1.1); } } @keyframes iconAnimate { 0%, 100% { -webkit-transform: scale(1); -moz-transform: scale(1); -ms-transform: scale(1); -o-transform: scale(1); transform: scale(1); } 10%, 30% { -webkit-transform: scale(0.9); -moz-transform: scale(0.9); -ms-transform: scale(0.9); -o-transform: scale(0.9); transform: scale(0.9); } 20%, 40%, 60%, 80% { -webkit-transform: scale(1.1); -moz-transform: scale(1.1); -ms-transform: scale(1.1); -o-transform: scale(1.1); transform: scale(1.1); } 50%, 70% { -webkit-transform: scale(1.1); -moz-transform: scale(1.1); -ms-transform: scale(1.1); -o-transform: scale(1.1); transform: scale(1.1); } } .fa { font-family: FontAwesome !important; } .local-search-pop-overlay { position: fixed; width: 100%; height: 100%; top: 0; left: 0; z-index: 2080; background-color: rgba(0,0,0,0.3); } .local-search-popup { display: none; position: fixed; top: 10%; left: 50%; margin-left: -350px; width: 700px; height: 80%; padding: 0; background: #fff; color: #333; z-index: 9999; border-radius: 5px; } @media (max-width: 767px) { .local-search-popup { padding: 0; top: 0; left: 0; margin: 0; width: 100%; height: 100%; border-radius: 0; } } .local-search-popup ul.search-result-list { padding: 0; margin: 0 5px; } .local-search-popup p.search-result { border-bottom: 1px dashed #ccc; padding: 5px 0; } .local-search-popup a.search-result-title { font-weight: bold; font-size: 16px; } .local-search-popup .search-keyword { border-bottom: 1px dashed #f00; font-weight: bold; color: #f00; } .local-search-popup .local-search-header { padding: 5px; height: 36px; background: #f5f5f5; border-top-left-radius: 5px; border-top-right-radius: 5px; } .local-search-popup #local-search-result { overflow: auto; position: relative; padding: 5px 25px; height: calc(100% - 55px); } .local-search-popup .local-search-input-wrapper { display: inline-block; width: calc(100% - 90px); height: 36px; line-height: 36px; padding: 0 5px; } .local-search-popup .local-search-input-wrapper input { padding: 8px 0; height: 20px; display: block; width: 100%; outline: none; border: none; background: transparent; vertical-align: middle; } .local-search-popup .search-icon, .local-search-popup .popup-btn-close { display: inline-block; font-size: 18px; color: #999; height: 36px; width: 18px; padding-left: 10px; padding-right: 10px; } .local-search-popup .search-icon { float: left; } .local-search-popup .popup-btn-close { border-left: 1px solid #eee; float: right; cursor: pointer; } .local-search-popup #no-result { position: absolute; left: 50%; top: 50%; -webkit-transform: translate(-50%, -50%); -webkit-transform: translate(-50%, -50%); -moz-transform: translate(-50%, -50%); -ms-transform: translate(-50%, -50%); -o-transform: translate(-50%, -50%); transform: translate(-50%, -50%); color: #ccc; } .site-uv, .site-pv, .page-pv { display: inline-block; } .site-uv .busuanzi-value, .site-pv .busuanzi-value, .page-pv .busuanzi-value { margin: 0 5px; } .page-archive .archive-page-counter { position: relative; top: 3px; left: 20px; } @media (max-width: 767px) { .page-archive .archive-page-counter { top: 5px; } } .page-archive .posts-collapse .archive-move-on { position: absolute; top: 11px; left: 0; margin-left: -6px; width: 10px; height: 10px; opacity: 0.5; background: #555; border: 1px solid #fff; border-radius: 50%; } .category-all-page .category-all-title { text-align: center; } .category-all-page .category-all { margin-top: 20px; } .category-all-page .category-list { margin: 0; padding: 0; list-style: none; } .category-all-page .category-list-item { margin: 5px 10px; } .category-all-page .category-list-count { color: #bbb; } .category-all-page .category-list-count:before { display: inline; content: \" (\"; } .category-all-page .category-list-count:after { display: inline; content: \") \"; } .category-all-page .category-list-child { padding-left: 10px; } #schedule ul#event-list { padding-left: 30px; } #schedule ul#event-list hr { margin: 20px 0 45px 0 !important; background: #222; } #schedule ul#event-list hr:after { display: inline-block; content: 'NOW'; background: #222; color: #fff; font-weight: bold; text-align: right; padding: 0 5px; } #schedule ul#event-list li.event { margin: 20px 0px; background: #f9f9f9; padding-left: 10px; min-height: 40px; } #schedule ul#event-list li.event h2.event-summary { margin: 0; padding-bottom: 3px; } #schedule ul#event-list li.event h2.event-summary:before { display: inline-block; font-family: FontAwesome; font-size: 8px; content: '\\f111'; vertical-align: middle; margin-right: 25px; color: #bbb; } #schedule ul#event-list li.event span.event-relative-time { display: inline-block; font-size: 12px; font-weight: 400; padding-left: 12px; color: #bbb; } #schedule ul#event-list li.event span.event-details { display: block; color: #bbb; margin-left: 56px; padding-top: 3px; padding-bottom: 6px; text-indent: -24px; line-height: 18px; } #schedule ul#event-list li.event span.event-details:before { text-indent: 0; display: inline-block; width: 14px; font-family: FontAwesome; text-align: center; margin-right: 9px; color: #bbb; } #schedule ul#event-list li.event span.event-details.event-location:before { content: '\\f041'; } #schedule ul#event-list li.event span.event-details.event-duration:before { content: '\\f017'; } #schedule ul#event-list li.event-past { background: #fcfcfc; } #schedule ul#event-list li.event-past > * { opacity: 0.6; } #schedule ul#event-list li.event-past h2.event-summary { color: #bbb; } #schedule ul#event-list li.event-past h2.event-summary:before { color: #dfdfdf; } #schedule ul#event-list li.event-now { background: #222; color: #fff; padding: 15px 0 15px 10px; } #schedule ul#event-list li.event-now h2.event-summary:before { -webkit-transform: scale(1.2); -moz-transform: scale(1.2); -ms-transform: scale(1.2); -o-transform: scale(1.2); transform: scale(1.2); color: #fff; animation: dot-flash 1s alternate infinite ease-in-out; } #schedule ul#event-list li.event-now * { color: #fff !important; } @-moz-keyframes dot-flash { from { opacity: 1; -webkit-transform: scale(1.1); -moz-transform: scale(1.1); -ms-transform: scale(1.1); -o-transform: scale(1.1); transform: scale(1.1); } to { opacity: 0; -webkit-transform: scale(1); -moz-transform: scale(1); -ms-transform: scale(1); -o-transform: scale(1); transform: scale(1); } } @-webkit-keyframes dot-flash { from { opacity: 1; -webkit-transform: scale(1.1); -moz-transform: scale(1.1); -ms-transform: scale(1.1); -o-transform: scale(1.1); transform: scale(1.1); } to { opacity: 0; -webkit-transform: scale(1); -moz-transform: scale(1); -ms-transform: scale(1); -o-transform: scale(1); transform: scale(1); } } @-o-keyframes dot-flash { from { opacity: 1; -webkit-transform: scale(1.1); -moz-transform: scale(1.1); -ms-transform: scale(1.1); -o-transform: scale(1.1); transform: scale(1.1); } to { opacity: 0; -webkit-transform: scale(1); -moz-transform: scale(1); -ms-transform: scale(1); -o-transform: scale(1); transform: scale(1); } } @keyframes dot-flash { from { opacity: 1; -webkit-transform: scale(1.1); -moz-transform: scale(1.1); -ms-transform: scale(1.1); -o-transform: scale(1.1); transform: scale(1.1); } to { opacity: 0; -webkit-transform: scale(1); -moz-transform: scale(1); -ms-transform: scale(1); -o-transform: scale(1); transform: scale(1); } } .page-post-detail .sidebar-toggle-line { background: #87daff; } .page-post-detail .comments { overflow: hidden; } ul.breadcrumb { list-style: none; margin: 1em 0; padding: 0 2em; text-align: center; font-size: 12px; } ul.breadcrumb li { display: inline; } ul.breadcrumb li+li:before { padding: 0.5em; font-weight: normal; content: \"/\\00a0\"; } ul.breadcrumb li+li:last-child { font-weight: bold; } a { border-bottom-color: #ccc; } hr { margin: 20px 0; height: 2px; } .main-inner { margin-top: 80px; } .header { background: #f5f5f5; } .header-inner { padding: 25px 0 20px; } .header-inner:before, .header-inner:after { content: \" \"; display: table; } .header-inner:after { clear: both; } @media (max-width: 767px) { .header-inner { width: auto; margin-bottom: 50px; padding: 10px; } } .site-meta { float: left; margin-left: -20px; line-height: normal; } @media (max-width: 767px) { .site-meta { margin-left: 10px; } } .site-meta .brand { padding: 2px 1px; background: none; } @media (max-width: 767px) { .site-meta .brand { display: block; } } .site-meta .logo { display: none; } .site-meta .site-title { font-size: 22px; font-weight: bolder; } @media (max-width: 767px) { .site-meta .site-title { line-height: 34px; } } .logo-line-before, .logo-line-after { display: block; overflow: hidden; margin: 0 auto; width: 75%; } @media (max-width: 767px) { .logo-line-before, .logo-line-after { display: none; } } .logo-line-before i, .logo-line-after i { position: relative; display: block; height: 2px; background: #222; } @media (max-width: 767px) { .logo-line-before i, .logo-line-after i { height: 3px; } } .use-motion .logo-line-before i { left: -100%; } .use-motion .logo-line-after i { right: -100%; } .site-subtitle { display: none; } .site-nav-toggle { position: static; float: right; } .menu { margin: 8px 0 0 0; } @media (max-width: 767px) { .menu { margin: 20px 0 0 0; padding: 0; } } .menu br { display: none; } .menu .menu-item { margin: 0; } @media (max-width: 767px) { .menu .menu-item { display: block; } } .menu .menu-item .badge { display: inline-block; padding: 1px 4px; margin-left: 5px; font-weight: 700; line-height: 1; color: #555; text-align: center; white-space: nowrap; background-color: #fff; border-radius: 10px; text-shadow: 1px 1px 0px rgba(0,0,0,0.1); } @media (max-width: 767px) { .menu .menu-item .badge { float: right; margin: 0.35em 0 0 0; } } .menu .menu-item a { padding: 0 10px; border: none; border-radius: 2px; transition-property: background; } @media (max-width: 767px) { .menu .menu-item a { text-align: left; } } .menu .menu-item a:hover, .menu-item-active a { background: #e1e1e1; } .menu a::before { display: none; } @media (max-width: 767px) { .menu a::before { display: block; } } @media (max-width: 767px) { .menu { float: none; } } .site-search form { display: none; } .posts-expand { padding-top: 0; } .posts-expand .post-title, .posts-expand .post-meta { text-align: left; } @media (max-width: 767px) { .posts-expand .post-title, .posts-expand .post-meta { text-align: center; } } .posts-expand .post-eof { display: none; } .posts-expand .post { margin-top: 120px; } .posts-expand .post:first-child { margin-top: 0; } .posts-expand .post-meta { margin-top: 5px; margin-bottom: 20px; } .posts-expand .post-title { position: relative; font-size: 26px; font-weight: 400; } @media (max-width: 767px) { .posts-expand .post-title { font-size: 22px; } } @media (min-width: 1200px) { .posts-expand .post-title { font-size: 26px; } } .posts-expand .post-title:hover:before { background: #222; } @media (max-width: 767px) { .posts-expand .post-body { font-size: 14px; } } .posts-expand .post-body img { margin: 0; } .posts-expand .post-tags { text-align: left; } .posts-expand .post-tags a { padding: 1px 5px; background: #f5f5f5; border-bottom: none; } .posts-expand .post-tags a:hover { background: #ccc; } .posts-expand .post-nav { margin-top: 40px; } .post-button { margin-top: 20px; text-align: left; } .post-button a { padding: 0; font-size: 14px; background: none; border: none; border-bottom: 2px solid #666; transition-property: border; } @media (max-width: 767px) { .post-button a { font-size: 12px; } } @media (min-width: 1200px) { .post-button a { font-size: 16px; } } .post-button a:hover { border-bottom-color: #222; } .links-of-blogroll-inline .links-of-blogroll-item { display: inline-block; } .btn { padding: 0 10px; border-width: 2px; border-radius: 0; } .headband { display: none; } .site-search { position: relative; float: right; margin-top: 5px; padding-top: 3px; } @media (max-width: 767px) { .site-search { float: none; padding: 0 10px; } } @media (max-width: 767px) { .container .main-inner { width: auto; } } .page-post-detail .post-title, .page-post-detail .post-meta { text-align: center; } .page-post-detail .post-title:before { display: none; } .page-post-detail .post-meta { margin-bottom: 60px; } .pagination { margin: 120px 0 0; text-align: left; } @media (max-width: 767px) { .pagination { margin: 80px 10px 0; text-align: center; } } .footer { margin-top: 80px; padding: 10px 0; background: #f5f5f5; color: #666; } .footer-inner { margin: 0 auto; text-align: left; } @media (max-width: 767px) { .footer-inner { width: auto; text-align: center; } }"}],"posts":[{"title":"5分钟带你体验kubernetes 对外提供访问","slug":"kubernetes_nodeport","date":"2019-03-07T03:20:20.000Z","updated":"2019-03-07T03:20:20.000Z","comments":true,"path":"2019/03/07/kubernetes_nodeport/","link":"","permalink":"http://28code.com/2019/03/07/kubernetes_nodeport/","excerpt":"","text":"作者声明：本篇文章系本人依照真实部署过程原创，未经许可，谢绝转载。 上一篇文章介绍了kubernetes kubernetes RollingUpdate滚动升级镜像回滚，这一篇文章带你来 5分钟带你体验kubernetes 对外提供访问 环境准备本文是之前环境的延续。 kubernetes RollingUpdate 对外提供访问在master我们执行命令查看pod12345# kubectl get pods -o wideNAME READY STATUS RESTARTS AGE IP NODE NOMINATED NODE READINESS GATESmyapp-799bbcd6b4-8nz5g 1/1 Running 0 91s 10.244.1.30 node01.k8s.com &lt;none&gt; &lt;none&gt;myapp-799bbcd6b4-jms4x 1/1 Running 0 92s 10.244.1.29 node01.k8s.com &lt;none&gt; &lt;none&gt;myapp-799bbcd6b4-l7q6v 1/1 Running 0 89s 10.244.2.34 node02.k8s.com &lt;none&gt; &lt;none&gt; 在master我们执行命令查看service12345查看 service# kubectl get svcNAME TYPE CLUSTER-IP EXTERNAL-IP PORT(S) AGEkubernetes ClusterIP 10.96.0.1 &lt;none&gt; 443/TCP 72mmyapp ClusterIP 10.100.210.72 &lt;none&gt; 80/TCP 17m 我们想要访问pod，目前只能在虚拟机的节点上访问，10.244.XXX.XXX的网址或者通过service服务的ip访问，如果我们想要在虚拟机之外访问集群内部的地址，这个时候我们需要执行命令修改service的文件 12master上执行命令# kubectl edit svc myapp 得到如下信息123456789101112131415161718192021222324252627# Please edit the object below. Lines beginning with a &apos;#&apos; will be ignored,# and an empty file will abort the edit. If an error occurs while saving this file will be# reopened with the relevant failures.#apiVersion: v1kind: Servicemetadata: creationTimestamp: &quot;2019-03-07T05:53:57Z&quot; labels: run: myapp name: myapp namespace: default resourceVersion: &quot;5195&quot; selfLink: /api/v1/namespaces/default/services/myapp uid: 38910862-4942-11e9-bbc4-000c296cc22aspec: clusterIP: 10.100.210.72 ports: - port: 80 protocol: TCP targetPort: 80 selector: run: myapp sessionAffinity: None type: ClusterIPstatus: loadBalancer: &#123;&#125; 找到 type: ClusterIP 修改为 type: NodePort修改后结果 123456789101112131415161718192021222324252627# Please edit the object below. Lines beginning with a &apos;#&apos; will be ignored,# and an empty file will abort the edit. If an error occurs while saving this file will be# reopened with the relevant failures.#apiVersion: v1kind: Servicemetadata: creationTimestamp: &quot;2019-03-18T05:53:57Z&quot; labels: run: myapp name: myapp namespace: default resourceVersion: &quot;5195&quot; selfLink: /api/v1/namespaces/default/services/myapp uid: 38910862-4942-11e9-bbc4-000c296cc22aspec: clusterIP: 10.100.210.72 ports: - port: 80 protocol: TCP targetPort: 80 selector: run: myapp sessionAffinity: None type: NodePortstatus: loadBalancer: &#123;&#125; 保存退出再次查看service1234# kubectl get svcNAME TYPE CLUSTER-IP EXTERNAL-IP PORT(S) AGEkubernetes ClusterIP 10.96.0.1 &lt;none&gt; 443/TCP 4h14mmyapp NodePort 10.100.210.72 &lt;none&gt; 80:32313/TCP 3h19m 发现myapp service的prot变为 80:32313/TCP，32313为master主机对外访问的端口号。master的ip为 192168.110.140，此时我们想要在虚拟机外部访问集群内部pod，需要使用 http://192.168.110.140:32313。在master节点上执行命令查看效果12345678910# curl http://192.168.110.140:32313V1myapp-799bbcd6b4-l7q6v# curl http://192.168.110.140:32313V1myapp-799bbcd6b4-jms4x# curl http://192.168.110.140:32313V1myapp-799bbcd6b4-8nz5g# curl http://192.168.110.140:32313 同时我在虚拟机的外部机器上访问 http://192.168.110.140:32313 以上是kubernetes 对外提供访问 整个过程","categories":[{"name":"kubernetes","slug":"kubernetes","permalink":"http://28code.com/categories/kubernetes/"}],"tags":[{"name":"docker","slug":"docker","permalink":"http://28code.com/tags/docker/"},{"name":"kubernetes","slug":"kubernetes","permalink":"http://28code.com/tags/kubernetes/"}]},{"title":"5分钟带你体验kubernetes RollingUpdate滚动升级镜像回滚","slug":"kubernetes_rub","date":"2019-03-07T03:20:20.000Z","updated":"2019-03-07T03:20:20.000Z","comments":true,"path":"2019/03/07/kubernetes_rub/","link":"","permalink":"http://28code.com/2019/03/07/kubernetes_rub/","excerpt":"","text":"作者声明：本篇文章系本人依照真实部署过程原创，未经许可，谢绝转载。 上一篇文章介绍了kubernetes RollingUpdate 滚动升级，这一篇文章带你来 5分钟带你体验kubernetes RollingUpdate滚动升级镜像回滚 环境准备本文中我用到了docker的两个镜像文件 28code/httpd:v1.0 和 28code/httpd:v2.0 ，系作者基于docker的busybox镜像做的一个docker image，主要功能是提供httpd服务并显示版本和pod信息。启动28code/httpd:v1.0镜像时候会生成文件位于 /var/www/index.html，index.html记录了版本号V1和启动pod时候的pod名称,启动28code/httpd:v2.0镜像时候会生成文件位于 /var/www/index.html，index.html记录了版本号V2和启动pod时候的pod名称，以上主要用来提供展示版本变更和访问时候显示访问的哪个pod的显示效果。 kubernetes RollingUpdate 滚动升级镜像回滚上次在master执行命令，部署docker镜像文件28code/httpd:v2.0，，镜像提供httpd服务，为3个服务。 查看pod运行情况12345# kubectl get pods -o wideNAME READY STATUS RESTARTS AGE IP NODE NOMINATED NODE READINESS GATESmyapp-6fd9d6f87-54xqz 1/1 Running 0 49s 10.244.1.28 node01.k8s.com &lt;none&gt; &lt;none&gt;myapp-6fd9d6f87-7grz9 1/1 Running 0 53s 10.244.2.32 node02.k8s.com &lt;none&gt; &lt;none&gt;myapp-6fd9d6f87-s4sqw 1/1 Running 0 51s 10.244.2.33 node02.k8s.com &lt;none&gt; &lt;none&gt; 在master节点上执行访问3个pod，看到返回信息都是V2版本123456789# curl 10.244.1.28V2myapp-6fd9d6f87-54xqz# curl 10.244.2.32V2myapp-6fd9d6f87-7grz9# curl 10.244.2.33V2myapp-6fd9d6f87-s4sqw 现在我们回退到V1版本，我们执行以下命令12# kubectl rollout undo deployment myappdeployment.extensions/myapp rolled back master节点上查看pod信息，看到pod正在回滚12345678# kubectl get pods -o wideNAME READY STATUS RESTARTS AGE IP NODE NOMINATED NODE READINESS GATESmyapp-6fd9d6f87-54xqz 1/1 Terminating 0 21m 10.244.1.28 node01.k8s.com &lt;none&gt; &lt;none&gt;myapp-6fd9d6f87-7grz9 1/1 Terminating 0 21m 10.244.2.32 node02.k8s.com &lt;none&gt; &lt;none&gt;myapp-6fd9d6f87-s4sqw 1/1 Terminating 0 21m 10.244.2.33 node02.k8s.com &lt;none&gt; &lt;none&gt;myapp-799bbcd6b4-8nz5g 1/1 Running 0 21s 10.244.1.30 node01.k8s.com &lt;none&gt; &lt;none&gt;myapp-799bbcd6b4-jms4x 1/1 Running 0 22s 10.244.1.29 node01.k8s.com &lt;none&gt; &lt;none&gt;myapp-799bbcd6b4-l7q6v 1/1 Running 0 19s 10.244.2.34 node02.k8s.com &lt;none&gt; &lt;none&gt; 再次master节点上查看pod信息12345# kubectl get pods -o wideNAME READY STATUS RESTARTS AGE IP NODE NOMINATED NODE READINESS GATESmyapp-799bbcd6b4-8nz5g 1/1 Running 0 91s 10.244.1.30 node01.k8s.com &lt;none&gt; &lt;none&gt;myapp-799bbcd6b4-jms4x 1/1 Running 0 92s 10.244.1.29 node01.k8s.com &lt;none&gt; &lt;none&gt;myapp-799bbcd6b4-l7q6v 1/1 Running 0 89s 10.244.2.34 node02.k8s.com &lt;none&gt; &lt;none&gt; 在master节点上执行访问3个pod，看到返回信息都是V1版本123456789# curl 10.244.1.30V1myapp-799bbcd6b4-8nz5g# curl 10.244.1.29V1myapp-799bbcd6b4-jms4x# curl 10.244.2.34V1myapp-799bbcd6b4-l7q6v 此时我们来测试kubernetes LB功能12345查看 service# kubectl get svcNAME TYPE CLUSTER-IP EXTERNAL-IP PORT(S) AGEkubernetes ClusterIP 10.96.0.1 &lt;none&gt; 443/TCP 72mmyapp ClusterIP 10.100.210.72 &lt;none&gt; 80/TCP 17m 在master节点执行命令展示LB的效果，123456789101112# curl 10.100.210.72V1myapp-799bbcd6b4-jms4x# curl 10.100.210.72V1myapp-799bbcd6b4-8nz5g# curl 10.100.210.72V1myapp-799bbcd6b4-l7q6v# curl 10.100.210.72V1myapp-799bbcd6b4-jms4x 可以看到访问服务地址10.100.210.72后，分别均匀的访问到3个pod上的httpd服务，版本已经回退变成V1版本。 以上是kubernetes RollingUpdate 滚动升级 整个过程","categories":[{"name":"kubernetes","slug":"kubernetes","permalink":"http://28code.com/categories/kubernetes/"}],"tags":[{"name":"docker","slug":"docker","permalink":"http://28code.com/tags/docker/"},{"name":"kubernetes","slug":"kubernetes","permalink":"http://28code.com/tags/kubernetes/"}]},{"title":"5分钟带你体验kubernetes RollingUpdate 滚动升级","slug":"kubernetes_ru","date":"2019-03-06T03:20:20.000Z","updated":"2019-03-06T03:20:20.000Z","comments":true,"path":"2019/03/06/kubernetes_ru/","link":"","permalink":"http://28code.com/2019/03/06/kubernetes_ru/","excerpt":"","text":"作者声明：本篇文章系本人依照真实部署过程原创，未经许可，谢绝转载。 上一篇文章介绍了kubernetes HA(High Available)高可用集群，这一篇文章带你来 5分钟带你体验kubernetes RollingUpdate 滚动升级 环境准备本文中我用到了docker的两个镜像文件 28code/httpd:v1.0 和 28code/httpd:v2.0 ，系作者基于docker的busybox镜像做的一个docker image，主要功能是提供httpd服务并显示版本和pod信息。启动28code/httpd:v1.0镜像时候会生成文件位于 /var/www/index.html，index.html记录了版本号V1和启动pod时候的pod名称,启动28code/httpd:v2.0镜像时候会生成文件位于 /var/www/index.html，index.html记录了版本号V2和启动pod时候的pod名称，以上主要用来提供展示版本变更和访问时候显示访问的哪个pod的显示效果。 kubernetes RollingUpdate 滚动升级上次在master执行命令，部署docker镜像文件28code/httpd:v1.0，，镜像提供httpd服务，为3个服务。上次我们把node02节点关闭后，这次把node02节点启动起来，并且执行命令启动node02节点上的kubelet 1[root@node02 ~]# systemctl start kubelet 在master上执行命令123456查看目前集群pod运行情况# kubectl get pods -o wideNAME READY STATUS RESTARTS AGE IP NODE NOMINATED NODE READINESS GATESmyapp-799bbcd6b4-6697m 1/1 Running 0 47m 10.244.1.25 node01.k8s.com &lt;none&gt; &lt;none&gt;myapp-799bbcd6b4-9cq9p 1/1 Running 0 7m29s 10.244.1.27 node01.k8s.com &lt;none&gt; &lt;none&gt;myapp-799bbcd6b4-p4dxz 1/1 Running 0 142m 10.244.1.24 node01.k8s.com &lt;none&gt; &lt;none&gt; 在master节点分别访问3个pod节点查看httpd服务信息123456789# curl 10.244.1.25V1myapp-799bbcd6b4-6697m# curl 10.244.1.27V1myapp-799bbcd6b4-9cq9p# curl 10.244.1.24V1myapp-799bbcd6b4-p4dxz 可以看到3个pod节点正常访问（V1代表版本信息，myapp-XXXXXX 是代表pods名称），显示了版本号和pod名称。我们所有pod都运行了28code/httpd:v1.0的image，现在我需要把pod都升级到28code/httpd:v2.0，我们在master节点执行以下命令12# kubectl set image deployment myapp myapp=28code/httpd:v2.0deployment.extensions/myapp image updated 再次查看pod运行情况，和上边信息对比发现pod已经都变成新的pod，并且之前都运行在node01上的3个pod，现在已经变成1个pod运行在node01上，2个pod运行在node02上。12345# kubectl get pods -o wideNAME READY STATUS RESTARTS AGE IP NODE NOMINATED NODE READINESS GATESmyapp-6fd9d6f87-54xqz 1/1 Running 0 49s 10.244.1.28 node01.k8s.com &lt;none&gt; &lt;none&gt;myapp-6fd9d6f87-7grz9 1/1 Running 0 53s 10.244.2.32 node02.k8s.com &lt;none&gt; &lt;none&gt;myapp-6fd9d6f87-s4sqw 1/1 Running 0 51s 10.244.2.33 node02.k8s.com &lt;none&gt; &lt;none&gt; 在master节点上执行访问3个pod，看到返回信息已经是V2版本123456789# curl 10.244.1.28V2myapp-6fd9d6f87-54xqz# curl 10.244.2.32V2myapp-6fd9d6f87-7grz9# curl 10.244.2.33V2myapp-6fd9d6f87-s4sqw 此时我们来测试kubernetes LB功能123456查看 service# kubectl get svcNAME TYPE CLUSTER-IP EXTERNAL-IP PORT(S) AGEkubernetes ClusterIP 10.96.0.1 &lt;none&gt; 443/TCP 72mmyapp ClusterIP 10.100.210.72 &lt;none&gt; 80/TCP 17m 在master节点执行命令展示LB的效果，123456789101112# curl 10.100.210.72V2myapp-6fd9d6f87-7grz9# curl 10.100.210.72V2myapp-6fd9d6f87-s4sqw# curl 10.100.210.72V2myapp-6fd9d6f87-54xqz# curl 10.100.210.72V2myapp-6fd9d6f87-s4sqw 可以看到访问服务地址10.100.210.72后，分别均匀的访问到3个pod上的httpd服务，版本已经变成V2版本。 以上是kubernetes RollingUpdate 滚动升级 整个过程","categories":[{"name":"kubernetes","slug":"kubernetes","permalink":"http://28code.com/categories/kubernetes/"}],"tags":[{"name":"docker","slug":"docker","permalink":"http://28code.com/tags/docker/"},{"name":"kubernetes","slug":"kubernetes","permalink":"http://28code.com/tags/kubernetes/"}]},{"title":"5分钟带你体验kubernetes HA(High Available)高可用集群","slug":"kubernetes_ha","date":"2019-03-05T03:20:20.000Z","updated":"2019-03-05T03:20:20.000Z","comments":true,"path":"2019/03/05/kubernetes_ha/","link":"","permalink":"http://28code.com/2019/03/05/kubernetes_ha/","excerpt":"","text":"作者声明：本篇文章系本人依照真实部署过程原创，未经许可，谢绝转载。 上一篇文章介绍了kubernetes集群伸缩功能，这一篇文件带你来 5分钟带你体验kubernetes HA(High Available)高可用集群 环境准备本文中我用到了docker的的镜像文件 28code/httpd:v1.0 ，系作者基于docker的busybox镜像做的一个docker image，主要功能是提供httpd服务并显示版本和pod信息。 启动28code/httpd:v1.0镜像时候会生成文件位于 /var/www/index.html，index.html记录了版本号V1和启动pod时候的pod名称，用来提供展示版本变更和访问时候显示访问的哪个pod的显示效果。 kubernetes HA(High Available)高可用集群上次在master执行命令，部署docker镜像文件28code/httpd:v1.0，，镜像提供httpd服务，为3个服务 123456查看目前集群pod运行情况# kubectl get pods -o wideNAME READY STATUS RESTARTS AGE IP NODE NOMINATED NODE READINESS GATESmyapp-799bbcd6b4-6697m 1/1 Running 0 18m 10.244.1.25 node01.k8s.com &lt;none&gt; &lt;none&gt;myapp-799bbcd6b4-6tqkk 1/1 Running 0 113m 10.244.2.30 node02.k8s.com &lt;none&gt; &lt;none&gt;myapp-799bbcd6b4-p4dxz 1/1 Running 0 113m 10.244.1.24 node01.k8s.com &lt;none&gt; &lt;none&gt; 可以看到3个pod有2个pod运行在node01节点上有1个pod运行在node02节点上。此时我们让node02断电，看看会发生什么。在node02节点上我们执行命令，让 node02 关机1[root@node02 ~]# init 0 在master上检查node的情况，发现node02状态已经发生变化12345# kubectl get nodesNAME STATUS ROLES AGE VERSIONmaster.k8s.com Ready master 3h3m v1.13.4node01.k8s.com Ready &lt;none&gt; 176m v1.13.4node02.k8s.com NotReady &lt;none&gt; 174m v1.13.4 在master上检查pod的情况（需要等待一段时间），发现运行在node02节点上pod已经被结束，运行的总pod还是3个，都运行在了node01上。123456# kubectl get pods -o wideNAME READY STATUS RESTARTS AGE IP NODE NOMINATED NODE READINESS GATESmyapp-799bbcd6b4-6697m 1/1 Running 0 40m 10.244.1.25 node01.k8s.com &lt;none&gt; &lt;none&gt;myapp-799bbcd6b4-6tqkk 1/1 Terminating 0 135m 10.244.2.30 node02.k8s.com &lt;none&gt; &lt;none&gt;myapp-799bbcd6b4-9cq9p 1/1 Running 0 9s 10.244.1.27 node01.k8s.com &lt;none&gt; &lt;none&gt;myapp-799bbcd6b4-p4dxz 1/1 Running 0 135m 10.244.1.24 node01.k8s.com &lt;none&gt; &lt;none&gt; 再等待一段时间后，检测pod状态，发现只剩下3个pod，都运行在了node01上。12345# kubectl get pods -o wideNAME READY STATUS RESTARTS AGE IP NODE NOMINATED NODE READINESS GATESmyapp-799bbcd6b4-6697m 1/1 Running 0 47m 10.244.1.25 node01.k8s.com &lt;none&gt; &lt;none&gt;myapp-799bbcd6b4-9cq9p 1/1 Running 0 7m29s 10.244.1.27 node01.k8s.com &lt;none&gt; &lt;none&gt;myapp-799bbcd6b4-p4dxz 1/1 Running 0 142m 10.244.1.24 node01.k8s.com &lt;none&gt; &lt;none&gt; 在master节点分别访问3个pod节点查看httpd服务信息123456789# curl 10.244.1.25V1myapp-799bbcd6b4-6697m# curl 10.244.1.27V1myapp-799bbcd6b4-9cq9p# curl 10.244.1.24V1myapp-799bbcd6b4-p4dxz 可以看到3个pod节点正常访问（V1代表版本信息，myapp-XXXXXX 是代表pods名称），显示了版本号和pod名称。 此时我们来测试kubernetes LB功能123456查看 service# kubectl get svcNAME TYPE CLUSTER-IP EXTERNAL-IP PORT(S) AGEkubernetes ClusterIP 10.96.0.1 &lt;none&gt; 443/TCP 72mmyapp ClusterIP 10.100.210.72 &lt;none&gt; 80/TCP 17m 在master节点执行命令展示LB的效果，123456789# curl 10.100.210.72V1myapp-799bbcd6b4-p4dxz# curl 10.100.210.72V1myapp-799bbcd6b4-6697m# curl 10.100.210.72V1myapp-799bbcd6b4-9cq9p 可以看到访问服务地址10.100.210.72后，分别均匀的访问到3个pod上的httpd服务 以上是kubernetes HA(High Available)高可用集群整个过程","categories":[{"name":"kubernetes","slug":"kubernetes","permalink":"http://28code.com/categories/kubernetes/"}],"tags":[{"name":"docker","slug":"docker","permalink":"http://28code.com/tags/docker/"},{"name":"kubernetes","slug":"kubernetes","permalink":"http://28code.com/tags/kubernetes/"}]},{"title":"5分钟带你体验kubernetes集群伸缩功能","slug":"kubernetes_rc2","date":"2019-03-04T03:20:20.000Z","updated":"2019-03-04T03:20:20.000Z","comments":true,"path":"2019/03/04/kubernetes_rc2/","link":"","permalink":"http://28code.com/2019/03/04/kubernetes_rc2/","excerpt":"","text":"作者声明：本篇文章系本人依照真实部署过程原创，未经许可，谢绝转载。 上一篇文章介绍了kubernetes集群扩展功能，这一篇文件带你来 5分钟带你体验kubernetes集群伸缩功能 环境准备本文中我用到了docker的的镜像文件 28code/httpd:v1.0 ，系作者基于docker的busybox镜像做的一个docker image，主要功能是提供httpd服务并显示版本和pod信息。 启动28code/httpd:v1.0镜像时候会生成文件位于 /var/www/index.html，index.html记录了版本号V1和启动pod时候的pod名称，用来提供展示版本变更和访问时候显示访问的哪个pod的显示效果。 kubernetes 集群伸缩上次在master执行命令，部署docker镜像文件28code/httpd:v1.0，，镜像提供httpd服务，扩展为5个服务 123456789101112扩展命令为# kubectl scale --replicas=5 deployment myappdeployment.extensions/myapp scaled查看pod运行情况# kubectl get pods -o wideNAME READY STATUS RESTARTS AGE IP NODE NOMINATED NODE READINESS GATESmyapp-799bbcd6b4-6697m 1/1 Running 0 57s 10.244.1.25 node01.k8s.com &lt;none&gt; &lt;none&gt;myapp-799bbcd6b4-6tqkk 1/1 Running 0 96m 10.244.2.30 node02.k8s.com &lt;none&gt; &lt;none&gt;myapp-799bbcd6b4-kfqpw 1/1 Running 0 57s 10.244.1.26 node01.k8s.com &lt;none&gt; &lt;none&gt;myapp-799bbcd6b4-p4dxz 1/1 Running 0 96m 10.244.1.24 node01.k8s.com &lt;none&gt; &lt;none&gt;myapp-799bbcd6b4-xxxb9 1/1 Running 0 57s 10.244.2.31 node02.k8s.com &lt;none&gt; &lt;none&gt; 可以看到kubernetes现在有5个pod提供httpd服务。如果我们现在想要伸缩，只需要3个pod提供httpd服务，只需执行命令 123456789101112131415161718# kubectl scale --replicas=3 deployment myappdeployment.extensions/myapp scaled查看pod运行情况# kubectl get pods -o wideNAME READY STATUS RESTARTS AGE IP NODE NOMINATED NODE READINESS GATESmyapp-799bbcd6b4-6697m 1/1 Running 0 17m 10.244.1.25 node01.k8s.com &lt;none&gt; &lt;none&gt;myapp-799bbcd6b4-6tqkk 1/1 Running 0 113m 10.244.2.30 node02.k8s.com &lt;none&gt; &lt;none&gt;myapp-799bbcd6b4-kfqpw 0/1 Terminating 0 17m 10.244.1.26 node01.k8s.com &lt;none&gt; &lt;none&gt;myapp-799bbcd6b4-p4dxz 1/1 Running 0 113m 10.244.1.24 node01.k8s.com &lt;none&gt; &lt;none&gt;myapp-799bbcd6b4-xxxb9 0/1 Terminating 0 17m 10.244.2.31 node02.k8s.com &lt;none&gt; &lt;none&gt;可以看到kubernetes结束了2个pod，等候几秒再次查看pod运行情况，pod已经变成3个# kubectl get pods -o wideNAME READY STATUS RESTARTS AGE IP NODE NOMINATED NODE READINESS GATESmyapp-799bbcd6b4-6697m 1/1 Running 0 18m 10.244.1.25 node01.k8s.com &lt;none&gt; &lt;none&gt;myapp-799bbcd6b4-6tqkk 1/1 Running 0 113m 10.244.2.30 node02.k8s.com &lt;none&gt; &lt;none&gt;myapp-799bbcd6b4-p4dxz 1/1 Running 0 113m 10.244.1.24 node01.k8s.com &lt;none&gt; &lt;none&gt; 在master节点分别访问3个pod节点查看httpd服务信息123456789# curl 10.244.1.25V1myapp-799bbcd6b4-6697m# curl 10.244.2.30V1myapp-799bbcd6b4-6tqkk# curl 10.244.1.24V1myapp-799bbcd6b4-p4dxz 可以看到3个pod节点正常访问（V1代表版本信息，myapp-XXXXXX 是代表pods名称），显示了版本号和pod名称。 此时我们来测试kubernetes LB功能123456查看 service# kubectl get svcNAME TYPE CLUSTER-IP EXTERNAL-IP PORT(S) AGEkubernetes ClusterIP 10.96.0.1 &lt;none&gt; 443/TCP 72mmyapp ClusterIP 10.100.210.72 &lt;none&gt; 80/TCP 17m 在master节点执行命令展示LB的效果，123456789101112131415# curl 10.100.210.72V1myapp-799bbcd6b4-6697m# curl 10.100.210.72V1myapp-799bbcd6b4-6tqkk# curl 10.100.210.72V1myapp-799bbcd6b4-p4dxz# curl 10.100.210.72V1myapp-799bbcd6b4-6697m# curl 10.100.210.72V1myapp-799bbcd6b4-6tqkk 可以看到访问服务地址10.100.210.72后，分别均匀的访问到3个pod上的httpd服务 以上是体验kubernetes集群伸缩功能整个过程","categories":[{"name":"kubernetes","slug":"kubernetes","permalink":"http://28code.com/categories/kubernetes/"}],"tags":[{"name":"docker","slug":"docker","permalink":"http://28code.com/tags/docker/"},{"name":"kubernetes","slug":"kubernetes","permalink":"http://28code.com/tags/kubernetes/"}]},{"title":"5分钟带你体验kubernetes集群扩展功能","slug":"kubernetes_rc","date":"2019-03-03T03:20:20.000Z","updated":"2019-03-03T03:20:20.000Z","comments":true,"path":"2019/03/03/kubernetes_rc/","link":"","permalink":"http://28code.com/2019/03/03/kubernetes_rc/","excerpt":"","text":"作者声明：本篇文章系本人依照真实部署过程原创，未经许可，谢绝转载。 上一篇文章介绍了kubernetes LB(Load Balancing)负载均衡集群，这一篇文件带你来 5分钟带你体验kubernetes集群扩展功能 环境准备本文中我用到了docker的的镜像文件 28code/httpd:v1.0 ，系作者基于docker的busybox镜像做的一个docker image，主要功能是提供httpd服务并显示版本和pod信息。 启动28code/httpd:v1.0镜像时候会生成文件位于 /var/www/index.html，index.html记录了版本号V1和启动pod时候的pod名称，用来提供展示版本变更和访问时候显示访问的哪个pod的显示效果。 kubernetes 集群扩展上次在master执行命令，部署docker镜像文件28code/httpd:v1.0，，镜像提供httpd服务，部署为2个服务1# kubectl run myapp --image=28code/httpd:v1.0 --replicas=2 在master节点执行命令，查看pod的运行情况123456789# kubectl get pods -o wideNAME READY STATUS RESTARTS AGE IP NODE NOMINATED NODE READINESS GATESmyapp-799bbcd6b4-6tqkk 1/1 Running 0 22s 10.244.2.30 node02.k8s.com &lt;none&gt; &lt;none&gt;myapp-799bbcd6b4-p4dxz 1/1 Running 0 22s 10.244.1.24 node01.k8s.com &lt;none&gt; &lt;none&gt;在master节点执行命令，查看deployment# kubectl get deploymentNAME READY UP-TO-DATE AVAILABLE AGEmyapp 2/2 2 2 5m57s 可以看到httpd服务启动了两个分别运行在node01节点上和node02节点上。 此时如果我们想要运行5个httpd服务，此时我们只需要在在master节点执行命令 1234567891011# kubectl scale --replicas=5 deployment myappdeployment.extensions/myapp scaled执行命令后，再次查看pod运行情况# kubectl get pods -o wideNAME READY STATUS RESTARTS AGE IP NODE NOMINATED NODE READINESS GATESmyapp-799bbcd6b4-6697m 1/1 Running 0 57s 10.244.1.25 node01.k8s.com &lt;none&gt; &lt;none&gt;myapp-799bbcd6b4-6tqkk 1/1 Running 0 96m 10.244.2.30 node02.k8s.com &lt;none&gt; &lt;none&gt;myapp-799bbcd6b4-kfqpw 1/1 Running 0 57s 10.244.1.26 node01.k8s.com &lt;none&gt; &lt;none&gt;myapp-799bbcd6b4-p4dxz 1/1 Running 0 96m 10.244.1.24 node01.k8s.com &lt;none&gt; &lt;none&gt;myapp-799bbcd6b4-xxxb9 1/1 Running 0 57s 10.244.2.31 node02.k8s.com &lt;none&gt; &lt;none&gt; 可以看到kubernetes扩展了3个pod提供httpd服务。 在master节点分别访问5个pod节点查看httpd服务信息123456789101112131415# curl 10.244.1.25V1myapp-799bbcd6b4-6697m# curl 10.244.2.30V1myapp-799bbcd6b4-6tqkk# curl 10.244.1.26V1myapp-799bbcd6b4-kfqpw# curl 10.244.1.24V1myapp-799bbcd6b4-p4dxz# curl 10.244.2.31V1myapp-799bbcd6b4-xxxb9 可以看到5个pod节点正常访问（V1代表版本信息，myapp-XXXXXX 是代表pods名称），显示了版本号和pod名称。 此时我们来测试kubernetes LB功能123456查看 service# kubectl get svcNAME TYPE CLUSTER-IP EXTERNAL-IP PORT(S) AGEkubernetes ClusterIP 10.96.0.1 &lt;none&gt; 443/TCP 72mmyapp ClusterIP 10.100.210.72 &lt;none&gt; 80/TCP 17m 在master节点执行命令展示LB的效果，12345678910111213141516171819202122232425262728293031323334353637383940414243# curl 10.100.210.72V1myapp-799bbcd6b4-6tqkk# curl 10.100.210.72V1myapp-799bbcd6b4-kfqpw# curl 10.100.210.72V1myapp-799bbcd6b4-p4dxz# curl 10.100.210.72V1myapp-799bbcd6b4-p4dxz# curl 10.100.210.72V1myapp-799bbcd6b4-p4dxz# curl 10.100.210.72V1myapp-799bbcd6b4-6tqkk# curl 10.100.210.72V1myapp-799bbcd6b4-6697m# curl 10.100.210.72V1myapp-799bbcd6b4-6tqkk# curl 10.100.210.72V1myapp-799bbcd6b4-p4dxz# curl 10.100.210.72V1myapp-799bbcd6b4-p4dxz# curl 10.100.210.72V1myapp-799bbcd6b4-6697m# curl 10.100.210.72V1myapp-799bbcd6b4-xxxb9# curl 10.100.210.72V1myapp-799bbcd6b4-p4dxz# curl 10.100.210.72V1myapp-799bbcd6b4-xxxb9# 可以看到访问服务地址10.100.210.72后，分别均匀的访问到5个pod上的httpd服务 以上是体验kubernetes集群扩展功能整个过程","categories":[{"name":"kubernetes","slug":"kubernetes","permalink":"http://28code.com/categories/kubernetes/"}],"tags":[{"name":"docker","slug":"docker","permalink":"http://28code.com/tags/docker/"},{"name":"kubernetes","slug":"kubernetes","permalink":"http://28code.com/tags/kubernetes/"}]},{"title":"5分钟带你体验kubernetes LB(Load Balancing)负载均衡集群","slug":"kubernetes_lb","date":"2019-03-02T03:20:20.000Z","updated":"2019-03-02T03:20:20.000Z","comments":true,"path":"2019/03/02/kubernetes_lb/","link":"","permalink":"http://28code.com/2019/03/02/kubernetes_lb/","excerpt":"","text":"作者声明：本篇文章系本人依照真实部署过程原创，未经许可，谢绝转载。 上一篇文章介绍了kubernetes 13.3.4 安装过程，这一篇文件带你来5分钟带你体验kubernetes LB(Load Balancing)负载均衡集群 环境准备本文中我用到了docker的的镜像文件 28code/httpd:v1.0 ，系作者基于docker的busybox镜像做的一个docker image，主要功能是提供httpd服务并显示版本和pod信息。 启动28code/httpd:v1.0镜像时候会生成文件位于 /var/www/index.html，index.html记录了版本号V1和启动pod时候的pod名称，用来提供展示版本变更和访问时候显示访问的哪个pod的显示效果。 kubernetes LB负载均衡集群实验在master执行命令，部署docker镜像文件28code/httpd:v1.0，，镜像提供httpd服务，部署为2个服务1# kubectl run myapp --image=28code/httpd:v1.0 --replicas=2 在master节点执行命令，查看pod的运行情况123456789# kubectl get pods -o wideNAME READY STATUS RESTARTS AGE IP NODE NOMINATED NODE READINESS GATESmyapp-799bbcd6b4-6tqkk 1/1 Running 0 22s 10.244.2.30 node02.k8s.com &lt;none&gt; &lt;none&gt;myapp-799bbcd6b4-p4dxz 1/1 Running 0 22s 10.244.1.24 node01.k8s.com &lt;none&gt; &lt;none&gt;在master节点执行命令，查看deployment# kubectl get deploymentNAME READY UP-TO-DATE AVAILABLE AGEmyapp 2/2 2 2 5m57s 可以看到httpd服务启动了两个分别运行在node01节点上和node02节点上， 在master节点分别访问两个pod节点查看httpd服务信息123456# curl 10.244.2.30V1myapp-799bbcd6b4-6tqkk# curl 10.244.1.24V1myapp-799bbcd6b4-p4dxz 可以看到两个pod节点正常访问（V1代表版本信息，myapp-XXXXXX 是代表pods名称），显示了版本号和pod名称。 此时我们来测试kubernetes LB功能1234567在master节点执行命令，创建service实现LB访问httpd服务# kubectl expose deployment myapp --name=myapp --port=80查看 service# kubectl get svcNAME TYPE CLUSTER-IP EXTERNAL-IP PORT(S) AGEkubernetes ClusterIP 10.96.0.1 &lt;none&gt; 443/TCP 72mmyapp ClusterIP 10.100.210.72 &lt;none&gt; 80/TCP 17m 在master节点执行命令展示LB的效果，123456789101112131415[root@master ~]# curl 10.100.210.72V1myapp-799bbcd6b4-p4dxz[root@master ~]# curl 10.100.210.72V1myapp-799bbcd6b4-6tqkk[root@master ~]# curl 10.100.210.72V1myapp-799bbcd6b4-p4dxz[root@master ~]# curl 10.100.210.72V1myapp-799bbcd6b4-6tqkk[root@master ~]# curl 10.100.210.72V1myapp-799bbcd6b4-p4dxz 可以看到访问服务地址10.100.210.72后，分别均匀的访问到2个pod上的httpd服务 以上是体验kubernetes LB(Load Balancing)负载均衡集群整个过程","categories":[{"name":"kubernetes","slug":"kubernetes","permalink":"http://28code.com/categories/kubernetes/"}],"tags":[{"name":"docker","slug":"docker","permalink":"http://28code.com/tags/docker/"},{"name":"kubernetes","slug":"kubernetes","permalink":"http://28code.com/tags/kubernetes/"}]},{"title":"kubernetes 1.13.4 安装过程","slug":"kubernetes_install","date":"2019-03-01T03:20:20.000Z","updated":"2019-03-01T03:20:20.000Z","comments":true,"path":"2019/03/01/kubernetes_install/","link":"","permalink":"http://28code.com/2019/03/01/kubernetes_install/","excerpt":"","text":"作者声明：本篇文章系本人依照真实部署过程原创，未经许可，谢绝转载。 1.概述今天我们要搭建一个kubernetes环境，主要使用kubeadm工具来搭建。 2.kubeadm简介kubeadm是Kubernetes官方提供的用于快速安装Kubernetes集群的工具。点击查看Kubernetes发布的版本 3.操作系统准备3.1. 硬件环境我们使用VM虚拟机来安装一个master节点两个node节点。虚拟机安装CentOS Linux7.6 配置如下：内存：1G （测试1G没问题）CPU：2个 （必须大于等于2）磁盘：20G 3.2. 系统环境1234# cat /etc/redhat-releaseRed Hat Enterprise Linux Server release 7.6 (Maipo)# uname -r3.10.0-957.el7.x86_64 （内核必须是3.10及以上） 4.安装步骤4.1. 网络同步时间确保集群内时钟同步1234# systemctl start chronyd.service# systemctl enable chronyd.service# systemctl status chronyd# systemctl restart chronyd 4.2. 主机名称解析12345# echo &apos;127.0.0.1 localhost localhost.localdomain localhost4 localhost4.localdomain4&apos; &gt; /etc/hosts # echo &apos;::1 localhost localhost.localdomain localhost6 localhost6.localdomain6&apos; &gt;&gt; /etc/hosts # echo &apos;192.168.110.140 master.k8s.com master&apos; &gt;&gt; /etc/hosts# echo &apos;192.168.110.141 node01.k8s.com node01&apos; &gt;&gt; /etc/hosts# echo &apos;192.168.110.142 node02.k8s.com node02&apos; &gt;&gt; /etc/hosts 4.3. 关闭iptables1# systemctl status iptables 4.4. 关闭防火墙：1# systemctl status firewalld 4.5. 关闭selinux1# getenforce 编辑 /etc/selinux/config 文件设置 SELINUX=disabled 4.6. 关闭 swap(也可以不关闭，需要在后续改配置文件)12# free -m# swapoff -a 编辑 /etc/fstab 文件 下注释掉所有swap 4.7. 检查net.bridge设置123456789101112# sysctl -a | grep bridgenet.bridge.bridge-nf-call-arptables = 1net.bridge.bridge-nf-call-ip6tables = 1net.bridge.bridge-nf-call-iptables = 1net.bridge.bridge-nf-filter-pppoe-tagged = 0net.bridge.bridge-nf-filter-vlan-tagged = 0net.bridge.bridge-nf-pass-vlan-input-dev = 0sysctl: reading key &quot;net.ipv6.conf.all.stable_secret&quot;sysctl: reading key &quot;net.ipv6.conf.default.stable_secret&quot;sysctl: reading key &quot;net.ipv6.conf.docker0.stable_secret&quot;sysctl: reading key &quot;net.ipv6.conf.ens33.stable_secret&quot;sysctl: reading key &quot;net.ipv6.conf.lo.stable_secret&quot; 检查net.bridge.bridge-nf-call-arptables = 1net.bridge.bridge-nf-call-ip6tables = 1net.bridge.bridge-nf-call-iptables = 1是否为1 如果不是1修改方式：修改 /etc/sysctl.conf 文件或者新建 /etc/sysctl.d/k8s.conf 增加net.bridge.bridge-nf-call-arptables = 1net.bridge.bridge-nf-call-ip6tables = 1net.bridge.bridge-nf-call-iptables = 1让文件生效sysctl -p /etc/sysctl.d/k8s.conf 4.8. yum仓库准备1234567891011121314151617181920212223CentOS-Base的yum仓库# cd /etc/yum.repos.d# mv CentOS-Base.repo CentOS-Base.repo.bak# curl -o CentOS-Base.repo http://mirrors.aliyun.com/repo/Centos-7.repo# sed -i &apos;s/gpgcheck=1/gpgcheck=0/g&apos; /etc/yum.repos.d/CentOS-Base.repodocker-ce的yum仓库# curl -o docker-ce.repo http://mirrors.aliyun.com/docker-ce/linux/centos/docker-ce.repokubernetes的yum仓库# cat &lt;&lt;EOF &gt; /etc/yum.repos.d/kubernetes.repo[kubernetes]name=kubernetesbaseurl=https://mirrors.aliyun.com/kubernetes/yum/repos/kubernetes-el7-x86_64/gpgcheck=1gpgkey=https://mirrors.aliyun.com/kubernetes/yum/doc/yum-key.gpg https://mirrors.aliyun.com/kubernetes/yum/doc/rpm-package-key.gpgenable=1EOF# update cacheyum clean all yum makecache yum repolist 4.8. 安装Docker12345678安装docker（默认安装最新版本，也可以安装指定版本）# yum -y install docker-ce启动docker# systemctl start docker开机启动docker# systemctl enable docker查看docker信息# docker info 4.9. 安装kubeadm和kubelet和kubectl12安装kubelet kubeadm kubectl（默认安装最新版本，目前版本是1.13.4）# yum install -y kubelet kubeadm kubectl 4.10. 没有关闭swap需要修改参数swap启动的时候 设置防止报错修改 /etc/sysconfig/kubelet 文件KUBELET_EXTRA_ARGS=”–fail-swap-on=false” 4.11. 安装网络插件（flannel或calico）这里我选择安装flannelflannel 默认的设置是:10.244.0.0/16flannel安装方法12执行以下语句# kubectl apply -f https://raw.githubusercontent.com/coreos/flannel/master/Documentation/kube-flannel.yml 点击查看flannel的相关信息 以上是安装好了一个虚拟机，我们需要把虚拟机复制2份，总共3个虚拟机。设置3个虚拟机的主机名和ip分别为(可根据实际自行设定) 主机名 ip master 192.168.110.140 node01 192.168.110.141 node02 192.168.110.142 5.镜像准备 查看master 节点上需要的镜像文件12345678# kubeadm config images listk8s.gcr.io/kube-apiserver:v1.13.4k8s.gcr.io/kube-controller-manager:v1.13.4k8s.gcr.io/kube-scheduler:v1.13.4k8s.gcr.io/kube-proxy:v1.13.4k8s.gcr.io/pause:3.1k8s.gcr.io/etcd:3.2.24k8s.gcr.io/coredns:1.2.6 为了解决国内普遍访问不到k8s.gcr.io的问题，我们从mirrorgooglecontainers下载image，然后打个tag来绕过网络限制： 123456789101112131415docker pull mirrorgooglecontainers/kube-apiserver:v1.13.4docker pull mirrorgooglecontainers/kube-controller-manager:v1.13.4docker pull mirrorgooglecontainers/kube-scheduler:v1.13.4docker pull mirrorgooglecontainers/kube-proxy:v1.13.4docker pull mirrorgooglecontainers/pause:3.1docker pull mirrorgooglecontainers/etcd:3.2.24docker pull mirrorgooglecontainers/coredns:1.2.6docker tag mirrorgooglecontainers/kube-apiserver:v1.13.4 k8s.gcr.io/kube-apiserver:v1.13.4docker tag mirrorgooglecontainers/kube-controller-manager:v1.13.4 k8s.gcr.io/kube-controller-manager:v1.13.4docker tag mirrorgooglecontainers/kube-scheduler:v1.13.4 k8s.gcr.io/kube-scheduler:v1.13.4docker tag mirrorgooglecontainers/kube-proxy:v1.13.4 k8s.gcr.io/kube-proxy:v1.13.4docker tag mirrorgooglecontainers/pause:3.1 k8s.gcr.io/pause:3.1docker tag mirrorgooglecontainers/etcd:3.2.24 k8s.gcr.io/etcd:3.2.24docker tag mirrorgooglecontainers/coredns:1.2.6 k8s.gcr.io/coredns:1.2.6 6. kubernetes master初始化123456查看kubeadm版本# rpm -q kubeadmkubeadm-1.13.4-0.x86_64执行命令初始化master# kubeadm init --kubernetes-version=&quot;1.13.4&quot; --pod-network-cidr=&quot;10.244.0.0/16&quot; --ignore-preflight-errors=Swap 初始化信息1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859606162636465666768[init] Using Kubernetes version: v1.13.4[preflight] Running pre-flight checks [WARNING Swap]: running with swap on is not supported. Please disable swap [WARNING SystemVerification]: this Docker version is not on the list of validated versions: 18.09.2. Latest validated version: 18.06 [WARNING Service-Kubelet]: kubelet service is not enabled, please run &apos;systemctl enable kubelet.service&apos;[preflight] Pulling images required for setting up a Kubernetes cluster[preflight] This might take a minute or two, depending on the speed of your internet connection[preflight] You can also perform this action in beforehand using &apos;kubeadm config images pull&apos;[kubelet-start] Writing kubelet environment file with flags to file &quot;/var/lib/kubelet/kubeadm-flags.env&quot;[kubelet-start] Writing kubelet configuration to file &quot;/var/lib/kubelet/config.yaml&quot;[kubelet-start] Activating the kubelet service[certs] Using certificateDir folder &quot;/etc/kubernetes/pki&quot;[certs] Generating &quot;front-proxy-ca&quot; certificate and key[certs] Generating &quot;front-proxy-client&quot; certificate and key[certs] Generating &quot;etcd/ca&quot; certificate and key[certs] Generating &quot;etcd/server&quot; certificate and key[certs] etcd/server serving cert is signed for DNS names [master.k8s.com localhost] and IPs [192.168.110.140 127.0.0.1 ::1][certs] Generating &quot;etcd/peer&quot; certificate and key[certs] etcd/peer serving cert is signed for DNS names [master.k8s.com localhost] and IPs [192.168.110.140 127.0.0.1 ::1][certs] Generating &quot;etcd/healthcheck-client&quot; certificate and key[certs] Generating &quot;apiserver-etcd-client&quot; certificate and key[certs] Generating &quot;ca&quot; certificate and key[certs] Generating &quot;apiserver-kubelet-client&quot; certificate and key[certs] Generating &quot;apiserver&quot; certificate and key[certs] apiserver serving cert is signed for DNS names [master.k8s.com kubernetes kubernetes.default kubernetes.default.svc kubernetes.default.svc.cluster.local] and IPs [10.96.0.1 192.168.110.140][certs] Generating &quot;sa&quot; key and public key[kubeconfig] Using kubeconfig folder &quot;/etc/kubernetes&quot;[kubeconfig] Writing &quot;admin.conf&quot; kubeconfig file[kubeconfig] Writing &quot;kubelet.conf&quot; kubeconfig file[kubeconfig] Writing &quot;controller-manager.conf&quot; kubeconfig file[kubeconfig] Writing &quot;scheduler.conf&quot; kubeconfig file[control-plane] Using manifest folder &quot;/etc/kubernetes/manifests&quot;[control-plane] Creating static Pod manifest for &quot;kube-apiserver&quot;[control-plane] Creating static Pod manifest for &quot;kube-controller-manager&quot;[control-plane] Creating static Pod manifest for &quot;kube-scheduler&quot;[etcd] Creating static Pod manifest for local etcd in &quot;/etc/kubernetes/manifests&quot;[wait-control-plane] Waiting for the kubelet to boot up the control plane as static Pods from directory &quot;/etc/kubernetes/manifests&quot;. This can take up to 4m0s[apiclient] All control plane components are healthy after 24.503251 seconds[uploadconfig] storing the configuration used in ConfigMap &quot;kubeadm-config&quot; in the &quot;kube-system&quot; Namespace[kubelet] Creating a ConfigMap &quot;kubelet-config-1.13&quot; in namespace kube-system with the configuration for the kubelets in the cluster[patchnode] Uploading the CRI Socket information &quot;/var/run/dockershim.sock&quot; to the Node API object &quot;master.k8s.com&quot; as an annotation[mark-control-plane] Marking the node master.k8s.com as control-plane by adding the label &quot;node-role.kubernetes.io/master=&apos;&apos;&quot;[mark-control-plane] Marking the node master.k8s.com as control-plane by adding the taints [node-role.kubernetes.io/master:NoSchedule][bootstrap-token] Using token: 0me0lv.xn1vhr6ub80qexyu[bootstrap-token] Configuring bootstrap tokens, cluster-info ConfigMap, RBAC Roles[bootstraptoken] configured RBAC rules to allow Node Bootstrap tokens to post CSRs in order for nodes to get long term certificate credentials[bootstraptoken] configured RBAC rules to allow the csrapprover controller automatically approve CSRs from a Node Bootstrap Token[bootstraptoken] configured RBAC rules to allow certificate rotation for all node client certificates in the cluster[bootstraptoken] creating the &quot;cluster-info&quot; ConfigMap in the &quot;kube-public&quot; namespace[addons] Applied essential addon: CoreDNS[addons] Applied essential addon: kube-proxyYour Kubernetes master has initialized successfully!To start using your cluster, you need to run the following as a regular user: mkdir -p $HOME/.kube sudo cp -i /etc/kubernetes/admin.conf $HOME/.kube/config sudo chown $(id -u):$(id -g) $HOME/.kube/configYou should now deploy a pod network to the cluster.Run &quot;kubectl apply -f [podnetwork].yaml&quot; with one of the options listed at: https://kubernetes.io/docs/concepts/cluster-administration/addons/You can now join any number of machines by running the following on each nodeas root: kubeadm join 192.168.110.140:6443 --token 0me0lv.xn1vhr6ub80qexyu --discovery-token-ca-cert-hash sha256:700e4cb4ce01c0be5a40e8278ebf531847090b53d53b115ca3031bfb25532b0b 根据提示在master节点下执行以下命令123# mkdir -p $HOME/.kube# sudo cp -i /etc/kubernetes/admin.conf $HOME/.kube/config# sudo chown $(id -u):$(id -g) $HOME/.kube/config 7. kubernetes node01加入集群node01执行以下命令加入集群1#kubeadm join 192.168.110.140:6443 --token 0me0lv.xn1vhr6ub80qexyu --discovery-token-ca-cert-hash sha256:700e4cb4ce01c0be5a40e8278ebf531847090b53d53b115ca3031bfb25532b0b --ignore-preflight-errors=Swap 执行命令后提示信息1234567891011121314151617181920212223[preflight] Running pre-flight checks [WARNING Swap]: running with swap on is not supported. Please disable swap [WARNING SystemVerification]: this Docker version is not on the list of validated versions: 18.09.2. Latest validated version: 18.06 [WARNING Service-Kubelet]: kubelet service is not enabled, please run &apos;systemctl enable kubelet.service&apos;[discovery] Trying to connect to API Server &quot;192.168.110.140:6443&quot;[discovery] Created cluster-info discovery client, requesting info from &quot;https://192.168.110.140:6443&quot;[discovery] Requesting info from &quot;https://192.168.110.140:6443&quot; again to validate TLS against the pinned public key[discovery] Cluster info signature and contents are valid and TLS certificate validates against pinned roots, will use API Server &quot;192.168.110.140:6443&quot;[discovery] Successfully established connection with API Server &quot;192.168.110.140:6443&quot;[join] Reading configuration from the cluster...[join] FYI: You can look at this config file with &apos;kubectl -n kube-system get cm kubeadm-config -oyaml&apos;[kubelet] Downloading configuration for the kubelet from the &quot;kubelet-config-1.13&quot; ConfigMap in the kube-system namespace[kubelet-start] Writing kubelet configuration to file &quot;/var/lib/kubelet/config.yaml&quot;[kubelet-start] Writing kubelet environment file with flags to file &quot;/var/lib/kubelet/kubeadm-flags.env&quot;[kubelet-start] Activating the kubelet service[tlsbootstrap] Waiting for the kubelet to perform the TLS Bootstrap...[patchnode] Uploading the CRI Socket information &quot;/var/run/dockershim.sock&quot; to the Node API object &quot;node01.k8s.com&quot; as an annotationThis node has joined the cluster:* Certificate signing request was sent to apiserver and a response was received.* The Kubelet was informed of the new secure connection details.Run &apos;kubectl get nodes&apos; on the master to see this node join the cluster. 8. kubernetes node02加入集群node02执行以下命令加入集群1#kubeadm join 192.168.110.140:6443 --token 0me0lv.xn1vhr6ub80qexyu --discovery-token-ca-cert-hash sha256:700e4cb4ce01c0be5a40e8278ebf531847090b53d53b115ca3031bfb25532b0b --ignore-preflight-errors=Swap 以上是配置好了kubernetes 一个master节点和两个node节点 9. 验证集群状态分别在3个节点上执行命令启动kubelet1# system start kubelet 在master节点上执行命令查看集群节点状态123456# kubectl get nodes得到以下信息NAME STATUS ROLES AGE VERSIONmaster.k8s.com Ready master 18m v1.13.4node01.k8s.com Ready &lt;none&gt; 11m v1.13.4node02.k8s.com Ready &lt;none&gt; 9m39s v1.13.4 在master节点上执行命令查看系统pod运行状态123456789101112131415# kubectl get pods -n kube-system得到以下信息NAME READY STATUS RESTARTS AGEcoredns-86c58d9df4-467w8 1/1 Running 0 23mcoredns-86c58d9df4-qrjx2 1/1 Running 0 23metcd-master.k8s.com 1/1 Running 0 22mkube-apiserver-master.k8s.com 1/1 Running 0 22mkube-controller-manager-master.k8s.com 1/1 Running 0 22mkube-flannel-ds-amd64-4hx5q 1/1 Running 0 5m1skube-flannel-ds-amd64-nhbqs 1/1 Running 0 5m1skube-flannel-ds-amd64-pf5dg 1/1 Running 0 5m1skube-proxy-g85lj 1/1 Running 0 14mkube-proxy-kb9l7 1/1 Running 0 23mkube-proxy-nczpr 1/1 Running 0 16mkube-scheduler-master.k8s.com 1/1 Running 0 22m 9. 错误排查在master节点上执行命令得到如下状态1234567891011121314151617# kubectl get nodesNAME STATUS ROLES AGE VERSIONmaster.k8s.com NotReady master 15m v1.13.4node01.k8s.com NotReady &lt;none&gt; 8m6s v1.13.4node02.k8s.com NotReady &lt;none&gt; 6m31s v1.13.4# kubectl get pods -n kube-systemNAME READY STATUS RESTARTS AGEcoredns-86c58d9df4-467w8 0/1 Pending 0 17mcoredns-86c58d9df4-qrjx2 0/1 Pending 0 17metcd-master.k8s.com 1/1 Running 0 16mkube-apiserver-master.k8s.com 1/1 Running 0 16mkube-controller-manager-master.k8s.com 1/1 Running 0 16mkube-proxy-g85lj 1/1 Running 0 8m19skube-proxy-kb9l7 1/1 Running 0 17mkube-proxy-nczpr 1/1 Running 0 9m54skube-scheduler-master.k8s.com 1/1 Running 0 16m 以上说明网络没有配置好，需要我们安装网络，此时参考 4.11. 安装网络插件（flannel或calico）执行命令安装flannel1# kubectl apply -f https://raw.githubusercontent.com/coreos/flannel/master/Documentation/kube-flannel.yml 执行命令后再次验证节点和pod状态 以上完整安装kubernetes 13.3.4 整个过程","categories":[{"name":"kubernetes","slug":"kubernetes","permalink":"http://28code.com/categories/kubernetes/"}],"tags":[{"name":"docker","slug":"docker","permalink":"http://28code.com/tags/docker/"},{"name":"kubernetes","slug":"kubernetes","permalink":"http://28code.com/tags/kubernetes/"}]}]}